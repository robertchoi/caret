# System Prompt Validation System

**ì‘ì„±ì¼**: 2025-01-26  
**ì‘ì„±ì**: AI Development Team  
**ëŒ€ìƒ**: Caret ê°œë°œì ë° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì‘ì—…ì

## ğŸ¯ **ê°œìš”**

Caretì€ Clineì˜ 707ë¼ì¸ í•˜ë“œì½”ë”©ëœ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ ìˆ˜ì •í•˜ê¸° ìœ„í•œ **ClineFeatureValidator** ê²€ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì€ ëª¨ë“  ê¸°ëŠ¥ ë³´ì¡´ì„ ìë™ìœ¼ë¡œ ê²€ì¦í•˜ì—¬ íšŒê·€ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

## ğŸ—ï¸ **ê²€ì¦ ì›ì¹™**

### **1. ê¸°ëŠ¥ 100% ë³´ì¡´**

-   **ì ˆëŒ€ ì›ì¹™**: Cline ì›ë³¸ ê¸°ëŠ¥ì˜ ëˆ„ë½ ê¸ˆì§€
-   **ê²€ì¦ í•„ìˆ˜**: ëª¨ë“  ë³€ê²½ì€ ClineFeatureValidator í†µê³¼ í•„ìˆ˜
-   **íšŒê·€ ë°©ì§€**: ê¸°ì¡´ ì‘ë™ ë°©ì‹ ì™„ì „ ë³´ì¡´

### **2. ìë™í™”ëœ ê²€ì¦**

-   **TDD ë°©ì‹**: ë³€ê²½ ì „ ê²€ì¦ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
-   **25ê°œ í…ŒìŠ¤íŠ¸**: ëª¨ë“  ì£¼ìš” ê¸°ëŠ¥ ì»¤ë²„
-   **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: ì„±ëŠ¥ ë° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¶”ì 

## ğŸ”§ **êµ¬í˜„ëœ ê²€ì¦ ì‹œìŠ¤í…œ**

### **ClineFeatureValidator ì•„í‚¤í…ì²˜**

```
ClineFeatureValidator (ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬)
â”œâ”€â”€ ToolExtractor (ë„êµ¬ ì¶”ì¶œ)
â”œâ”€â”€ McpExtractor (MCP ì„œë²„ ì¶”ì¶œ)
â”œâ”€â”€ SystemInfoExtractor (ì‹œìŠ¤í…œ ì •ë³´ ì¶”ì¶œ)
â”œâ”€â”€ ValidationEngine (ê²€ì¦ ì—”ì§„)
â”œâ”€â”€ ReportGenerator (ë³´ê³ ì„œ ìƒì„±)
â””â”€â”€ MetricsCollector (ì„±ëŠ¥ ë©”íŠ¸ë¦­)
```

### **ì‚¬ìš©ë²•**

```typescript
import { ClineFeatureValidator } from "@caret-src/core/verification"

const validator = new ClineFeatureValidator()

// ê¸°ë³¸ ê²€ì¦
const result = await validator.validateAllFeatures(originalPrompt, newPrompt, { variant: "default", strictMode: true })

// ë„êµ¬ ì¶”ì¶œ
const tools = await validator.extractTools(prompt)

// ë©”íŠ¸ë¦­ í™•ì¸
const metrics = validator.getValidationMetrics()
```

### **25ê°œ í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬**

1. **Construction and Initialization** (2ê°œ) - ì‹œìŠ¤í…œ ì´ˆê¸°í™”
2. **Tool Extraction** (5ê°œ) - ë„êµ¬ ì¶”ì¶œ ì •í™•ì„±
3. **Feature Extraction** (2ê°œ) - ì¢…í•© ê¸°ëŠ¥ ì¶”ì¶œ
4. **Tool Completeness Validation** (4ê°œ) - ë„êµ¬ ì™„ì „ì„±
5. **Comprehensive Validation** (4ê°œ) - ì¢…í•© ê²€ì¦
6. **Error Handling** (2ê°œ) - ì˜¤ë¥˜ ì²˜ë¦¬
7. **Performance and Metrics** (3ê°œ) - ì„±ëŠ¥ ë©”íŠ¸ë¦­
8. **Integration Tests** (3ê°œ) - ì‹¤ì œ Cline í”„ë¡¬í”„íŠ¸ ê²€ì¦

## ğŸ“‹ **ê°œë°œ ì ˆì°¨**

### **1. ì‚¬ì „ ê²€ì¦**

```bash
# ê²€ì¦ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test caret-src/__tests__/cline-feature-validation.test.ts

# ê²°ê³¼ í™•ì¸ (25 passed í•„ìˆ˜)
âœ“ 25 passed (25) - 100% ì„±ê³µë¥ 
```

### **2. ë³€ê²½ì‚¬í•­ êµ¬í˜„**

-   ì‘ì€ ë‹¨ìœ„ë¡œ ì ì§„ì  ë³€ê²½
-   ê° ë³€ê²½ í›„ ì¦‰ì‹œ ê²€ì¦ ì‹¤í–‰
-   ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ë¡¤ë°± ë° ìˆ˜ì •

### **3. ê²€ì¦ ë° ë¬¸ì„œí™”**

-   ê²€ì¦ ê²°ê³¼ ë¡œê·¸ ì €ì¥
-   ë³€ê²½ì‚¬í•­ ë¬¸ì„œí™”
-   ì„±ëŠ¥ ë©”íŠ¸ë¦­ ê¸°ë¡

## ğŸš¨ **ì£¼ì˜ì‚¬í•­**

### **ê¸ˆì§€ì‚¬í•­**

-   âŒ **Cline ì›ë³¸ íŒŒì‹±/ì¬êµ¬ì„±**: ì •ë³´ ì†ì‹¤ ìœ„í—˜
-   âŒ **ê²€ì¦ ì—†ëŠ” ë³€ê²½**: ëª¨ë“  ë³€ê²½ì€ ê²€ì¦ í•„ìˆ˜
-   âŒ **ë³µì¡í•œ ì¶”ìƒí™”**: ë‹¨ìˆœí•˜ê³  ì´í•´í•˜ê¸° ì‰¬ìš´ êµ¬ì¡° ìœ ì§€

### **í•„ìˆ˜ì‚¬í•­**

-   âœ… **ë°±ì—… ìƒì„±**: Cline ì›ë³¸ íŒŒì¼ ìˆ˜ì • ì „ `.cline` ë°±ì—…
-   âœ… **CARET MODIFICATION ì£¼ì„**: ìˆ˜ì • ë¶€ë¶„ì— ëª…í™•í•œ ì£¼ì„
-   âœ… **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: ì´ ë¬¸ì„œì™€ upstream-merging.mdx ë™ê¸°í™”

## ğŸ”„ **êµ¬í˜„ ì™„ë£Œ ì‚¬í•­**

### **âœ… 003-01: ê²€ì¦ ì‹œìŠ¤í…œ (ì™„ë£Œ)**

-   ClineFeatureValidator ì‹œìŠ¤í…œ ì™„ì „ êµ¬í˜„
-   25ê°œ í…ŒìŠ¤íŠ¸ 100% í†µê³¼
-   ëª¨ë“ˆí˜• ì•„í‚¤í…ì²˜ (6ê°œ ì „ë¬¸ ëª¨ë“ˆ)
-   ì„±ëŠ¥ ìµœì í™” ì™„ë£Œ (75% ì½”ë“œ ê°ì†Œ)

## ğŸ“Š **ì„±ëŠ¥ ë©”íŠ¸ë¦­**

### **ê²€ì¦ ì‹œìŠ¤í…œ ì„±ëŠ¥**

-   **ì‹¤í–‰ ì‹œê°„**: í‰ê·  1ms ë¯¸ë§Œ
-   **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: 14MB ì´í•˜
-   **í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨**: 100% (25/25)
-   **ì½”ë“œ íš¨ìœ¨ì„±**: 75% ì½”ë“œ ê°ì†Œ (ë¦¬íŒ©í† ë§ í›„)

### **ëª¨ë‹ˆí„°ë§ ì§€í‘œ**

```typescript
// ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ í™•ì¸
const summary = validator.getPerformanceSummary()
console.log({
	totalValidations: summary.totalValidations,
	averageTime: summary.averageTime,
	peakMemory: summary.peakMemory,
	totalErrors: summary.totalErrors,
})
```

## ğŸ”— **ê´€ë ¨ ë¬¸ì„œ**

-   [Caret Architecture Guide](./caret-architecture-and-implementation-guide.mdx)
-   [Testing Guide](./testing-guide.mdx)
-   [Upstream Merging Guide](../guides/upstream-merging.mdx)
-   [Task #003 Series](../tasks/)

## ğŸ“ **ì§€ì› ë° ë¬¸ì˜**

ê²€ì¦ ì‹œìŠ¤í…œ ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´:

1. ë¡œê·¸ í™•ì¸: CaretLogger DEBUG ë ˆë²¨ í™œì„±í™”
2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰: ê°œë³„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œ ë¬¸ì œ ê²©ë¦¬
3. ì„±ëŠ¥ ë©”íŠ¸ë¦­: ë©”ëª¨ë¦¬ ë° ì‹œê°„ ì‚¬ìš©ëŸ‰ í™•ì¸

---

**ğŸ¯ ëª©í‘œ**: ì•ˆì „í•˜ê³  ê²€ì¦ëœ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì§„í™”ë¥¼ í†µí•œ Caretì˜ ì§€ì†ì  ê°œì„ !
