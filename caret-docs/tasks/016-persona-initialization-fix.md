# Task #016: 페르소나 초기화 및 이미지 문제 해결

**프로젝트**: Caret  
**담당자**: luke  
**우선순위**: 🚨 **High - 사용자 경험 및 초기 설정 안정성**  
**예상 시간**: 1.5-2.5시간  
**상태**: 📋 **예정**  

## 🎯 **목표: Caret 초기 설치 시 페르소나 관련 문제 해결 및 기본 설정 강화**

### **핵심 목적**
- **페르소나 초기화 안정성 확보**: 처음 설치 시 페르소나가 비어 있거나 잘못 설정되는 문제 해결
- **페르소나 이미지 표시 개선**: 페르소나 이미지가 올바르게 표시되지 않는 문제 해결
- **기본 페르소나 설정**: 초기화 시 기본 페르소나(사랑이)가 설정되도록 기능 추가

### **🎯 현황 분석 및 관련 파일**
- **문제 현상**:
  - 처음 설치 시 페르소나가 비워져 있음 (이치카에 셋팅되어 있으나, 실제로는 비어있는 것처럼 보임)
  - 페르소나 이미지가 표시되지 않음
  - 초기화 메뉴에서 페르소나 이미지가 삭제되지 않는 문제
- **관련 파일 (예상)**:
  - `caret-src/core/config/PersonaConfig.ts` (페르소나 설정 관리)
  - `caret-src/providers/CaretProvider.ts` (초기화 로직)
  - `webview-ui/src/caret/components/PersonaManagement.tsx` (페르소나 관리 UI)
  - `webview-ui/src/caret/components/PersonaAvatar.tsx` (페르소나 아바타 표시)
  - `caret-assets/template_characters/` (기본 페르소나 이미지)

### **📋 구현 계획**

#### **Phase 1: 문제 진단 및 초기화 로직 분석 (0.5시간)**
- 처음 설치 시 페르소나가 비워져 있는 현상 재현 시도
- `CaretProvider` 또는 관련 초기화 로직에서 페르소나 설정이 어떻게 이루어지는지 분석
- `PersonaConfig`의 저장 및 로드 방식 검토

#### **Phase 2: 페르소나 이미지 문제 해결 (1시간)**
- 페르소나 이미지가 표시되지 않는 원인 파악 (경로 문제, 로딩 문제 등)
- 초기화 시 페르소나 이미지가 삭제되지 않는 문제 해결
- 기본 페르소나(사랑이) 이미지를 포함하여 초기화 시 설정되도록 구현
  - `caret-assets/template_characters/sarang.png` 활용

#### **Phase 3: 기본 페르소나 설정 기능 추가 (0.5시간)**
- 초기화 시 기본 페르소나(사랑이)가 자동으로 설정되도록 로직 추가
- 추후 신규 캐릭터(캐럿)으로 변경 예정임을 고려하여 확장성 있게 구현
- **템플릿 페르소나 이름 출력 제거**: 페르소나 관리 페이지에서 템플릿 페르소나의 이름이 출력되지 않도록 수정 (사용자 업로드 페르소나와의 혼동 방지)

## 📊 **검증 및 품질 보장**

### **✅ 성공 기준**
- [ ] **초기 설치 시 페르소나 정상 설정**: Caret 설치 후 페르소나가 비어있지 않고 기본값으로 설정됨
- [ ] **페르소나 이미지 정상 표시**: 설정된 페르소나 이미지가 UI에 올바르게 표시됨
- [ ] **초기화 기능 개선**: 초기화 시 페르소나 이미지가 올바르게 처리되고 기본 페르소나가 설정됨

## 🚀 **다음 단계 연결**

### **최종 목표**
- Caret의 초기 사용자 경험 개선
- 페르소나 기능의 안정성 및 신뢰성 확보
