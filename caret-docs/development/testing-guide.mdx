# Caret í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## 1. ê°œìš”

ì´ ë¬¸ì„œëŠ” Caret í”„ë¡œì íŠ¸ì˜ í…ŒìŠ¤íŠ¸ ì „ëµ, ì‘ì„± ë°©ë²•, ì‹¤í–‰ ë°©ë²•ì— ëŒ€í•œ ì¢…í•© ê°€ì´ë“œì…ë‹ˆë‹¤. Caretì€ **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 100%**ë¥¼ ëª©í‘œë¡œ í•˜ë©°, **í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD)** ë°©ì‹ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

## 1.1 ë¹ ë¥¸ ì‹œì‘ - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´

### ğŸš¨ ì¤‘ìš”: ì˜¬ë°”ë¥¸ í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´ ì‚¬ìš©

**âŒ ì£¼ì˜: `npm test` ì‚¬ìš© ê¸ˆì§€**
- `npm test` ëª…ë ¹ì–´ëŠ” ì „ì²´ ë¹Œë“œ + ì»´íŒŒì¼ + ë¦°íŠ¸ + ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë¯€ë¡œ ë§¤ìš° ëŠë¦¼
- ê°œë°œ ì¤‘ì—ëŠ” ì•„ë˜ì˜ **ê°œë³„ í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´** ì‚¬ìš© ê¶Œì¥

### ğŸ¯ ê°œë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ê°œë°œ ì‹œ ê¶Œì¥)

```bash
# âœ… ë°±ì—”ë“œ ê°œë³„ í…ŒìŠ¤íŠ¸ (íŠ¹ì • íŒŒì¼)
npm run test:backend caret-src/__tests__/your-test-file.test.ts

# âœ… ë°±ì—”ë“œ ê°œë³„ í…ŒìŠ¤íŠ¸ (íŠ¹ì • í…ŒìŠ¤íŠ¸ ì´ë¦„)
npm run test:backend caret-src/__tests__/your-test-file.test.ts -t "your test name"

# âœ… í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ (React ì»´í¬ë„ŒíŠ¸, UI ë¡œì§)
npm run test:webview

# âœ… ë°±ì—”ë“œ ê°ì‹œ ëª¨ë“œ (ê°œë°œ ì¤‘ ìë™ ì‹¤í–‰)
npm run test:backend:watch

# âœ… ë¹ ë¥¸ ê°œë°œ í…ŒìŠ¤íŠ¸ (ì›¹ë·° ì œì™¸, ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨)
npm run dev:build-test:fast
```

### ğŸ“Š ì „ì²´ í…ŒìŠ¤íŠ¸ + ì»¤ë²„ë¦¬ì§€ ì‹¤í–‰ (CI/CD ë˜ëŠ” ìµœì¢… ê²€ì¦ìš©)

```bash
# ğŸŒŸ ê°€ì¥ ì¶”ì²œ: ì „ì²´ í…ŒìŠ¤íŠ¸ + ì»¤ë²„ë¦¬ì§€ ë¶„ì„ í•œë²ˆì—
npm run test:all; npm run caret:coverage

# ë˜ëŠ” ë°±ì—”ë“œ ìƒì„¸ ì»¤ë²„ë¦¬ì§€ê¹Œì§€ í¬í•¨
npm run test:all; npm run test:backend:coverage; npm run caret:coverage

# í†µí•© í…ŒìŠ¤íŠ¸ (VSCode Extension í™˜ê²½)
npm run test:integration
```

### ğŸ“ˆ ì»¤ë²„ë¦¬ì§€ ë¶„ì„

```bash
# Caret ì „ìš© ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë¶„ì„ (íŒŒì¼ë³„ ìƒì„¸)
npm run caret:coverage

# ë°±ì—”ë“œ Vitest ì»¤ë²„ë¦¬ì§€ (ë¼ì¸ë³„ ìƒì„¸)
npm run test:backend:coverage

# VSCode Extension í†µí•© ì»¤ë²„ë¦¬ì§€
npm run test:coverage
```

### ğŸ“ ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì›Œí¬í”Œë¡œìš° ì˜ˆì‹œ

```bash
# 1. ê°œë°œ ì¤‘: íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
npm run test:backend caret-src/__tests__/json-overlay-real-files.test.ts

# 2. ê°œë°œ ì¤‘: íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ
npm run test:backend caret-src/__tests__/json-overlay-real-files.test.ts -t "should load and apply Alpha personality"

# 3. ê°ì‹œ ëª¨ë“œë¡œ ê°œë°œ (ì½”ë“œ ë³€ê²½ ì‹œ ìë™ í…ŒìŠ¤íŠ¸)
npm run test:backend:watch

# 4. ë¹ ë¥¸ ì „ì²´ ê²€ì¦ (ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨)
npm run dev:build-test:fast

# 5. ìµœì¢… ê²€ì¦ (PR ì „)
npm run test:all && npm run caret:coverage
```

## 2. í…ŒìŠ¤íŠ¸ ì „ëµ

### 2.1 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

**Caret ì „ìš© ì½”ë“œ 100% ì»¤ë²„ë¦¬ì§€ ì›ì¹™:**

-   **ğŸ¥• Caret ì‹ ê·œ ë¡œì§**: `caret-src/`, `webview-ui/src/caret/` ë””ë ‰í† ë¦¬ì˜ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ê¸°ëŠ¥ ì½”ë“œ**ëŠ” **100% í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í•„ìˆ˜**
-   **ğŸ”— Re-export íŒŒì¼**: Cline ëª¨ë“ˆì˜ ë‹¨ìˆœ ì¬ë‚´ë³´ë‚´ê¸° íŒŒì¼ (ì˜ˆ: `export { ... } from "..."`)ì€ í…ŒìŠ¤íŠ¸ ì œì™¸ ê°€ëŠ¥
-   **ğŸ“¦ Type ì •ì˜**: ëŸ°íƒ€ì„ ë¡œì§ì´ ì—†ëŠ” ì¸í„°í˜ì´ìŠ¤/íƒ€ì… ì •ì˜ë§Œ í¬í•¨í•œ íŒŒì¼ì€ í…ŒìŠ¤íŠ¸ ì œì™¸ ê°€ëŠ¥
-   **ğŸ¤– Cline ì›ë³¸ ì½”ë“œ**: `src/`, `webview-ui/src/` (caret í´ë” ì œì™¸)ëŠ” Clineì˜ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ë¥¼ í™œìš©í•˜ë©°, ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì‘ì„±ì„ ê°•ì œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
-   **ğŸ“Š ì»¤ë²„ë¦¬ì§€ ë¶„ì„**: `caret-scripts/caret-coverage-check.js`ë¥¼ ì‚¬ìš©í•˜ì—¬ Caret vs Cline ì½”ë“œì˜ ì»¤ë²„ë¦¬ì§€ë¥¼ ë¶„ë¦¬ ë¶„ì„í•©ë‹ˆë‹¤.
-   **ğŸ” Cline ì½”ë“œ ìˆ˜ì • ì‹œ í…ŒìŠ¤íŠ¸ ë°©ë²•**: Cline ì›ë³¸ ì½”ë“œ ìˆ˜ì •ì´ í•„ìš”í•˜ì—¬ ì¶”ê°€ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°, ê°€ëŠ¥í•œ `caret-src/__tests__/` ë””ë ‰í† ë¦¬ ë‚´ì— ë³„ë„ í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ë§Œë“¤ì–´ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ ë²”ìœ„ê°€ ê³¼ë„í•˜ê²Œ í™•ì¥ë˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.

#### í˜„ì¬ í…ŒìŠ¤íŠ¸ ì œì™¸ íŒŒì¼ë“¤ (ì •ë‹¹í•œ ì´ìœ )

-   `caret-src/core/prompts/system.ts` - Cline ëª¨ë“ˆ ì¬ë‚´ë³´ë‚´ê¸°
-   `caret-src/shared/providers/types.ts` - TypeScript ì¸í„°í˜ì´ìŠ¤ ì •ì˜ë§Œ í¬í•¨
-   `caret-src/core/task/index.ts` - ì¼ë¶€ ë˜í¼ ë¡œì§ (í–¥í›„ í…ŒìŠ¤íŠ¸ ì¶”ê°€ ì˜ˆì •)

### 2.2 í…ŒìŠ¤íŠ¸ ìœ í˜•

#### 2.2.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)

-   **ëŒ€ìƒ**: ê°œë³„ í•¨ìˆ˜, í´ë˜ìŠ¤, ì»´í¬ë„ŒíŠ¸
-   **ë„êµ¬**: Vitest (ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ í†µì¼)
-   **ìœ„ì¹˜**: `__tests__/` í´ë” ë˜ëŠ” `.test.ts/.test.tsx` íŒŒì¼

#### 2.2.2 í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)

-   **ëŒ€ìƒ**: ì—¬ëŸ¬ ëª¨ë“ˆ ê°„ì˜ ìƒí˜¸ì‘ìš©, ì‹¤ì œ ë¹Œë“œ ê²€ì¦, ì‹œìŠ¤í…œ ì „ì²´ ë™ì‘
-   **ë„êµ¬**: Vitest (ë°±ì—”ë“œ), VSCode Extension Test Runner, React Testing Library
-   **ìœ„ì¹˜**: `caret-src/__tests__/integration.test.ts`, `src/test/`, `webview-ui/src/__tests__/`
-   **íŠ¹ì§•**: ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰ì„ í†µí•œ ë¹Œë“œ/ì»´íŒŒì¼ ê²€ì¦ (2025-01-21 ì—…ë°ì´íŠ¸)
-   **ìƒˆë¡œìš´ ì ‘ê·¼**: ëª¨í‚¹ëœ í™˜ê²½ì´ ì•„ë‹Œ ì‹¤ì œ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ê²€ì¦ìœ¼ë¡œ ë³€ê²½

#### 2.2.3 E2E í…ŒìŠ¤íŠ¸ (End-to-End Tests)

-   **ëŒ€ìƒ**: ì „ì²´ ì›Œí¬í”Œë¡œìš°
-   **ë„êµ¬**: VSCode Extension Development Host
-   **ë°©ë²•**: F5 ë””ë²„ê¹…ì„ í†µí•œ ìˆ˜ë™/ìë™ í…ŒìŠ¤íŠ¸

### 2.3 TDD(Test-Driven Development) ë°©ì‹ âš¡ **í•„ìˆ˜**

Caretì€ **TDD ë°©ì‹ì„ í•„ìˆ˜**ë¡œ í•©ë‹ˆë‹¤:

1. **Red**: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
2. **Green**: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±
3. **Refactor**: ì½”ë“œ í’ˆì§ˆ ê°œì„  (í…ŒìŠ¤íŠ¸ëŠ” ê³„ì† í†µê³¼)

**ğŸš¨ AI ê°œë°œì í•„ìˆ˜ ì›ì¹™**:

-   âŒ **êµ¬í˜„ ë¨¼ì € ê¸ˆì§€**: ì½”ë“œ ì‘ì„± ì „ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ë¶€í„°
-   âœ… **í…ŒìŠ¤íŠ¸ ìš°ì„ **: "í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤" ì„ ì–¸ í•„ìˆ˜
-   âœ… **ë‹¨ê³„ë³„ ì§„í–‰**: RED â†’ GREEN â†’ REFACTOR ìˆœì„œ ì—„ìˆ˜

**ì‹¤ì œ ì ìš© ì˜ˆì‹œ (UI ì–¸ì–´ ì„¤ì •)**:

```typescript
// RED: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
it("should update only uiLanguage without affecting other settings", async () => {
	await setUILanguage("ja")
	expect(mockUpdateSettings).toHaveBeenCalledWith({
		uiLanguage: "ja", // ì˜¤ì§ ì´ê²ƒë§Œ
	})
	expect(state.chatSettings.model).toBe("claude-3") // ë‹¤ë¥¸ ì„¤ì • ì˜í–¥ ì—†ìŒ
})

// GREEN: ìµœì†Œ êµ¬í˜„
const setUILanguage = async (language: string) => {
	await StateServiceClient.updateSettings({ uiLanguage: language })
}

// REFACTOR: ì—ëŸ¬ ì²˜ë¦¬, ìƒíƒœ ì—…ë°ì´íŠ¸ ë“± ê°œì„ 
```

#### 2.3.1 TDD í•µì‹¬ ê·œì¹™ (Kent Beck)

1. **ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì—†ì´ëŠ” í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤**
2. **ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¤ëŠ” ê²ƒ ì´ìƒìœ¼ë¡œ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤**
3. **í˜„ì¬ ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼ì‹œí‚¤ëŠ” ê²ƒ ì´ìƒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤**

#### 2.3.2 TDD ë‹¨ê³„ë³„ ì²´í¬ë¦¬ìŠ¤íŠ¸

**Red ë‹¨ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œë¡œ ì‹¤íŒ¨í•˜ëŠ”ê°€?
- [ ] ì‹¤íŒ¨ ì´ìœ ê°€ ì˜ˆìƒí•œ ê²ƒê³¼ ê°™ì€ê°€?
- [ ] í…ŒìŠ¤íŠ¸ ì´ë¦„ì´ êµ¬ì²´ì ì´ê³  ëª…í™•í•œê°€?
- [ ] í•˜ë‚˜ì˜ ë™ì‘ë§Œ í…ŒìŠ¤íŠ¸í•˜ëŠ”ê°€?
- [ ] í…ŒìŠ¤íŠ¸ê°€ ê°„ë‹¨í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ìš´ê°€?

**Green ë‹¨ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ”ê°€?
- [ ] ìµœì†Œí•œì˜ ì½”ë“œë¡œ êµ¬í˜„í–ˆëŠ”ê°€?
- [ ] ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ë“¤ë„ ì—¬ì „íˆ í†µê³¼í•˜ëŠ”ê°€?
- [ ] í•˜ë“œì½”ë”©ì´ë‚˜ ì„ì‹œë°©í¸ ì‚¬ìš©ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šì•˜ëŠ”ê°€?

**Refactor ë‹¨ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì—¬ì „íˆ í†µê³¼í•˜ëŠ”ê°€?
- [ ] ì½”ë“œ ì¤‘ë³µì´ ì œê±°ë˜ì—ˆëŠ”ê°€?
- [ ] ì½”ë“œê°€ ë” ì½ê¸° ì‰¬ì›Œì¡ŒëŠ”ê°€?
- [ ] ì„±ëŠ¥ì´ ê°œì„ ë˜ì—ˆëŠ”ê°€?
- [ ] ì„¤ê³„ê°€ ê°œì„ ë˜ì—ˆëŠ”ê°€?

#### 2.3.3 TDD ì‹¤ì „ ì˜ˆì‹œ: CaretLogger ì™„ì „ ê°œë°œ

**1ë‹¨ê³„: ê¸°ë³¸ ë¡œê¹… ê¸°ëŠ¥**
```typescript
// Red - ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
describe('CaretLogger', () => {
  it('should log info message', () => {
    const logger = new CaretLogger();
    const result = logger.info('test message');
    expect(result).toBe('[INFO] test message');
  });
});

// Green - ìµœì†Œ êµ¬í˜„
export class CaretLogger {
  info(message: string): string {
    return `[INFO] ${message}`;
  }
}

// Refactor - í•„ìš”ì‹œ ê°œì„ 
```

**2ë‹¨ê³„: ë‹¤ì–‘í•œ ë¡œê·¸ ë ˆë²¨ ì¶”ê°€**
```typescript
// Red - ì—ëŸ¬ ë¡œê¹… í…ŒìŠ¤íŠ¸
it('should log error message', () => {
  const logger = new CaretLogger();
  const result = logger.error('error message');
  expect(result).toBe('[ERROR] error message');
});

// Green - ì—ëŸ¬ ë©”ì„œë“œ ì¶”ê°€
export class CaretLogger {
  info(message: string): string {
    return `[INFO] ${message}`;
  }
  
  error(message: string): string {
    return `[ERROR] ${message}`;
  }
}

// Refactor - ì¤‘ë³µ ì œê±°
export class CaretLogger {
  private formatMessage(level: string, message: string): string {
    return `[${level}] ${message}`;
  }
  
  info(message: string): string {
    return this.formatMessage('INFO', message);
  }
  
  error(message: string): string {
    return this.formatMessage('ERROR', message);
  }
}
```

**3ë‹¨ê³„: ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€**
```typescript
// Red - ì»¨í…ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸
it('should include context in log message', () => {
  const logger = new CaretLogger('TestContext');
  const result = logger.info('test message');
  expect(result).toBe('[INFO][TestContext] test message');
});

// Green & Refactor - ì»¨í…ìŠ¤íŠ¸ ì§€ì›
export class CaretLogger {
  constructor(private context?: string) {}
  
  private formatMessage(level: string, message: string): string {
    const contextPart = this.context ? `[${this.context}]` : '';
    return `[${level}]${contextPart} ${message}`;
  }
  
  info(message: string): string {
    return this.formatMessage('INFO', message);
  }
  
  error(message: string): string {
    return this.formatMessage('ERROR', message);
  }
}
```

#### 2.3.4 TDD ì„±ê³¼ ì¸¡ì •

**ì •ëŸ‰ì  ì§€í‘œ:**
- **Statement Coverage**: 100% ëª©í‘œ
- **Branch Coverage**: 100% ëª©í‘œ
- **Function Coverage**: 100% ëª©í‘œ
- **Line Coverage**: 100% ëª©í‘œ

**TDD í’ˆì§ˆ ì§€í‘œ:**
```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
npm run test:time

# í…ŒìŠ¤íŠ¸ ì•ˆì •ì„± ê²€ì¦ (10ë²ˆ ì‹¤í–‰)
npm run test:stability

# ì»¤ë²„ë¦¬ì§€ íŠ¸ë Œë“œ ë¶„ì„
npm run test:coverage:trend
```

**ì •ì„±ì  ì§€í‘œ:**
- ë” ë‚˜ì€ ì„¤ê³„ (í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ)
- ë‚®ì€ ê²°í•©ë„, ë†’ì€ ì‘ì§‘ë„
- ëª…í™•í•œ ì¸í„°í˜ì´ìŠ¤
- ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„
- ì•ˆì „í•œ ë¦¬íŒ©í† ë§
- ì ì€ ë””ë²„ê¹… ì‹œê°„

#### 2.3.5 TDD ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

**í…ŒìŠ¤íŠ¸ê°€ ë„ˆë¬´ ë³µì¡í•  ë•Œ:**
```typescript
// ë¬¸ì œ: ë³µì¡í•œ í…ŒìŠ¤íŠ¸
it('should handle complex user workflow', () => {
  // 50ì¤„ì˜ ë³µì¡í•œ í…ŒìŠ¤íŠ¸...
});

// í•´ê²°: ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬
describe('user workflow', () => {
  it('should validate user input', () => {
    // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
  });
  
  it('should process valid input', () => {
    // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
  });
  
  it('should save processed data', () => {
    // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
  });
});
```

**ì™¸ë¶€ ì˜ì¡´ì„±ì´ ë§ì„ ë•Œ:**
```typescript
// ë¬¸ì œ: ì™¸ë¶€ ì˜ì¡´ì„± ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€
export class CaretService {
  constructor(
    private api: ApiClient,
    private storage: Storage,
    private logger: Logger
  ) {}
}

// í•´ê²°: ì˜ì¡´ì„± ì£¼ì…ê³¼ ëª¨í‚¹
describe('CaretService', () => {
  let mockApi: jest.Mocked<ApiClient>;
  let mockStorage: jest.Mocked<Storage>;
  let mockLogger: jest.Mocked<Logger>;
  
  beforeEach(() => {
    mockApi = createMockApiClient();
    mockStorage = createMockStorage();
    mockLogger = createMockLogger();
  });
});
```

#### 2.3.6 íŒ€ TDD ê°€ì´ë“œë¼ì¸

**ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] í…ŒìŠ¤íŠ¸ê°€ ë¨¼ì € ì‘ì„±ë˜ì—ˆëŠ”ê°€?
- [ ] Red-Green-Refactor ì‚¬ì´í´ì„ ë”°ëëŠ”ê°€?
- [ ] ê° ì»¤ë°‹ì´ ì‘ì€ ë‹¨ìœ„ì¸ê°€?
- [ ] í…ŒìŠ¤íŠ¸ ì´ë¦„ì´ ëª…í™•í•œê°€?
- [ ] í•˜ë‚˜ì˜ ë™ì‘ë§Œ í…ŒìŠ¤íŠ¸í•˜ëŠ”ê°€?
- [ ] AAA íŒ¨í„´ì„ ë”°ë¥´ëŠ”ê°€?
- [ ] ì ì ˆí•œ assertionì„ ì‚¬ìš©í•˜ëŠ”ê°€?

**í˜ì–´ í”„ë¡œê·¸ë˜ë° ê¶Œì¥:**
- **Driver**: ì½”ë“œ ì‘ì„±
- **Navigator**: TDD í”„ë¡œì„¸ìŠ¤ ê°€ì´ë“œ
- ì—­í•  êµì²´í•˜ë©° í•™ìŠµ

### 2.4 í…ŒìŠ¤íŠ¸ ì½”ë“œ ì•„í‚¤í…ì²˜ ì›ì¹™ ğŸ—ï¸ **í•„ìˆ˜**

#### 2.4.1 í…ŒìŠ¤íŠ¸ ì „ìš© ì½”ë“œ ë¶„ë¦¬ ì›ì¹™

**ğŸš¨ ì ˆëŒ€ ê¸ˆì§€: ì„œë¹„ìŠ¤ ì½”ë“œì— í…ŒìŠ¤íŠ¸ ì „ìš© ë©”ì„œë“œ í¬í•¨**

```typescript
// âŒ ì ˆëŒ€ ê¸ˆì§€: ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ì— í…ŒìŠ¤íŠ¸ ì „ìš© ë©”ì„œë“œ
export class CaretSystemPrompt {
  // âœ… ìš´ì˜ ë©”ì„œë“œ
  generateFromJsonSections() { ... }

  // âŒ ê¸ˆì§€: í…ŒìŠ¤íŠ¸ ì „ìš© ë©”ì„œë“œê°€ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ì— ìˆìŒ
  generateSystemPrompt() { ... }          // í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©
  generateSystemPromptWithTemplates() { ... } // í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©
  callOriginalSystemPrompt() { ... }      // í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©
}
```

**âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: TestHelper í´ë˜ìŠ¤ ë¶„ë¦¬**

```typescript
// âœ… ì„œë¹„ìŠ¤ í´ë˜ìŠ¤: ìš´ì˜ ì½”ë“œë§Œ
export class CaretSystemPrompt {
  generateFromJsonSections() { ... }
  getMetrics() { ... }
  clearMetrics() { ... }
}

// âœ… í…ŒìŠ¤íŠ¸ í—¬í¼: í…ŒìŠ¤íŠ¸ ì „ìš© ë©”ì„œë“œ
export class CaretSystemPromptTestHelper {
  generateSystemPrompt() { ... }          // í…ŒìŠ¤íŠ¸ ì „ìš©
  generateSystemPromptWithTemplates() { ... } // í…ŒìŠ¤íŠ¸ ì „ìš©
  callOriginalSystemPrompt() { ... }      // í…ŒìŠ¤íŠ¸ ì „ìš©
}
```

#### 2.4.2 TestHelper íŒ¨í„´ ì‚¬ìš©ë²•

**ë””ë ‰í† ë¦¬ êµ¬ì¡°:**

```
caret-src/
â”œâ”€â”€ core/prompts/
â”‚   â””â”€â”€ CaretSystemPrompt.ts           // ìš´ì˜ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
â””â”€â”€ __tests__/
    â”œâ”€â”€ helpers/
        â””â”€â”€ CaretSystemPromptTestHelper.ts // í…ŒìŠ¤íŠ¸ í—¬í¼ í´ë˜ìŠ¤
    â””â”€â”€ CaretSystemPrompt.test.ts       // í…ŒìŠ¤íŠ¸ íŒŒì¼
```

**TestHelper í´ë˜ìŠ¤ ëª…ëª… ê·œì¹™:**
- `{ServiceName}TestHelper.ts` í˜•ì‹
- `caret-src/__tests__/helpers/` ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜
- í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œë§Œ í¬í•¨

**ì˜ˆì™¸ì ì¸ ê²½ìš°: forTestOnly_ ì ‘ë‘ì‚¬**
- TestHelper íŒ¨í„´ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©
- ë©”ì„œë“œëª…ì— `forTestOnly_` ë˜ëŠ” `forTest_` ì ‘ë‘ì‚¬ í•„ìˆ˜
- ì‚¬ìš© ì´ìœ ë¥¼ ì£¼ì„ìœ¼ë¡œ ëª…ì‹œ

```typescript
export class CaretSystemPrompt {
  // ì¼ë°˜ ìš´ì˜ ë©”ì„œë“œ
  generateFromJsonSections() { ... }
  
  // ì˜ˆì™¸ì ì¸ ê²½ìš°: ë‚´ë¶€ ìƒíƒœ ì ‘ê·¼ì„ ìœ„í•´ í•„ìš”
  forTestOnly_getInternalState() { 
    // í…ŒìŠ¤íŠ¸ì—ì„œ ë‚´ë¶€ ìƒíƒœ ê²€ì¦ì„ ìœ„í•´ í•„ìš”
    return this.internalState;
  }
}
```

### 2.5 í…ŒìŠ¤íŠ¸ íŒŒì¼ êµ¬ì¡° ë° ëª…ëª… í‘œì¤€

#### 2.5.1 í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜ ê·œì¹™

**ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ (caret-src/)**
```
caret-src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ webview/
â”‚   â”‚   â”œâ”€â”€ CaretProvider.ts
â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚       â””â”€â”€ CaretProvider.test.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ caret-logger.ts
â”‚       â””â”€â”€ caret-logger.test.ts  # ê°™ì€ ë””ë ‰í† ë¦¬ í—ˆìš©
```

**í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ (webview-ui/src/caret/)**
```
webview-ui/src/caret/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CaretWelcome.tsx
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ CaretWelcome.test.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useCaretState.ts
â”‚   â””â”€â”€ useCaretState.test.ts
â””â”€â”€ utils/
    â”œâ”€â”€ i18n.ts
    â””â”€â”€ __tests__/
        â””â”€â”€ i18n.test.ts
```

#### 2.5.2 í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª…ëª… ê·œì¹™

**ê¸°ë³¸ ê·œì¹™:**
- **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: `{FileName}.test.{ts|tsx}`
- **í†µí•© í…ŒìŠ¤íŠ¸**: `{FeatureName}.integration.test.{ts|tsx}`
- **E2E í…ŒìŠ¤íŠ¸**: `{WorkflowName}.e2e.test.{ts|tsx}`

**íŠ¹ìˆ˜ ì¼€ì´ìŠ¤:**
- **ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜**: `{utilityName}.test.ts`
- **í›… í…ŒìŠ¤íŠ¸**: `{hookName}.test.ts`
- **API í…ŒìŠ¤íŠ¸**: `{apiName}.api.test.ts`

### 2.6 í…ŒìŠ¤íŠ¸ ì½”ë“œ êµ¬ì¡° í‘œì¤€

#### 2.6.1 ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿

**ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿:**
```typescript
// {FileName}.test.ts
import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest';
import { {TargetClass} } from '../{FileName}';

describe('{TargetClass}', () => {
  let instance: {TargetClass};

  beforeEach(() => {
    // ê° í…ŒìŠ¤íŠ¸ ì „ ì´ˆê¸°í™”
    instance = new {TargetClass}();
  });

  afterEach(() => {
    // ê° í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬
    vi.clearAllMocks();
  });

  describe('constructor', () => {
    it('should initialize with default values', () => {
      // ìƒì„±ì í…ŒìŠ¤íŠ¸
    });
  });

  describe('{methodName}', () => {
    it('should {expected behavior} when {condition}', () => {
      // ë©”ì„œë“œë³„ í…ŒìŠ¤íŠ¸
    });
  });
});
```

**React ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿:**
```typescript
// {ComponentName}.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { {ComponentName} } from '../{ComponentName}';

describe('{ComponentName}', () => {
  const defaultProps = {
    // ê¸°ë³¸ props ì •ì˜
  };

  it('should render correctly', () => {
    render(<{ComponentName} {...defaultProps} />);
    expect(screen.getByRole('...')).toBeInTheDocument();
  });

  it('should handle user interaction', async () => {
    const mockHandler = vi.fn();
    render(<{ComponentName} {...defaultProps} onAction={mockHandler} />);
    
    fireEvent.click(screen.getByRole('button'));
    
    await waitFor(() => {
      expect(mockHandler).toHaveBeenCalledTimes(1);
    });
  });
});
```

#### 2.6.2 í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™” (describe ë¸”ë¡)

**í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™”:**
```typescript
describe('CaretLogger', () => {
  describe('constructor', () => {
    // ìƒì„±ì ê´€ë ¨ í…ŒìŠ¤íŠ¸ë“¤
  });

  describe('info method', () => {
    // info ë©”ì„œë“œ ê´€ë ¨ í…ŒìŠ¤íŠ¸ë“¤
  });

  describe('error method', () => {
    // error ë©”ì„œë“œ ê´€ë ¨ í…ŒìŠ¤íŠ¸ë“¤
  });

  describe('private methods', () => {
    // private ë©”ì„œë“œ í…ŒìŠ¤íŠ¸ (í•„ìš”ì‹œ)
  });
});
```

**ê¸°ëŠ¥ë³„ ê·¸ë£¹í™”:**
```typescript
describe('i18n utility', () => {
  describe('translation', () => {
    // ë²ˆì—­ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë“¤
  });

  describe('language detection', () => {
    // ì–¸ì–´ ê°ì§€ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë“¤
  });

  describe('fallback handling', () => {
    // í´ë°± ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ë“¤
  });
});
```

### 2.7 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± í‘œì¤€

#### 2.7.1 í…ŒìŠ¤íŠ¸ ì´ë¦„ ê·œì¹™

**ëª…ëª… íŒ¨í„´:**
```typescript
// íŒ¨í„´: should {expected result} when {condition}
it('should return user data when valid ID is provided', () => {});
it('should throw error when invalid ID is provided', () => {});
it('should render loading state when data is fetching', () => {});

// íŒ¨í„´: should {action} {object}
it('should validate email format', () => {});
it('should save user preferences', () => {});
it('should clear cache on logout', () => {});
```

**ì¢‹ì€ í…ŒìŠ¤íŠ¸ ì´ë¦„ vs ë‚˜ìœ í…ŒìŠ¤íŠ¸ ì´ë¦„:**
```typescript
// âœ… ì¢‹ì€ ì˜ˆ
it('should return error message when API key is missing', () => {});
it('should render Korean text correctly in welcome component', () => {});
it('should log info message with timestamp and context', () => {});

// âŒ ë‚˜ìœ ì˜ˆ
it('should work', () => {});
it('test API', () => {});
it('check function', () => {});
```

#### 2.7.2 AAA íŒ¨í„´ (Arrange-Act-Assert) **í•„ìˆ˜**

**ê¸°ë³¸ êµ¬ì¡°:**
```typescript
it('should format log message with context', () => {
  // Arrange (ì¤€ë¹„)
  const logger = new CaretLogger('test-context');
  const message = 'test message';
  const level = 'INFO';

  // Act (ì‹¤í–‰)
  const result = logger.formatMessage(level, message);

  // Assert (ê²€ì¦)
  expect(result).toBe('[INFO][test-context] test message');
});
```

**ë³µì¡í•œ ì¼€ì´ìŠ¤:**
```typescript
it('should handle API error and show user-friendly message', async () => {
  // Arrange
  const mockApiClient = {
    fetchData: vi.fn().mockRejectedValue(new Error('Network error'))
  };
  const component = render(<DataComponent apiClient={mockApiClient} />);
  const showErrorSpy = vi.spyOn(window, 'alert');

  // Act
  fireEvent.click(screen.getByRole('button', { name: 'Load Data' }));
  await waitFor(() => {
    expect(screen.getByText('ë¡œë”© ì¤‘...')).not.toBeInTheDocument();
  });

  // Assert
  expect(showErrorSpy).toHaveBeenCalledWith('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
  expect(screen.getByText('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')).toBeInTheDocument();
});
```

### 2.8 í•„ìˆ˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìœ í˜•

#### 2.8.1 ì •ìƒ ê²½ë¡œ (Happy Path)
```typescript
describe('normal operations', () => {
  it('should process valid input successfully', () => {
    // ì •ìƒì ì¸ ì…ë ¥ì— ëŒ€í•œ ì •ìƒì ì¸ ì²˜ë¦¬
  });

  it('should return expected output format', () => {
    // ì˜ˆìƒë˜ëŠ” ì¶œë ¥ í˜•ì‹ ê²€ì¦
  });
});
```

#### 2.8.2 ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ (Boundary Testing)
```typescript
describe('boundary conditions', () => {
  it('should handle empty string input', () => {
    expect(processText('')).toBe('');
  });

  it('should handle maximum length input', () => {
    const maxInput = 'a'.repeat(1000);
    expect(() => processText(maxInput)).not.toThrow();
  });

  it('should handle null and undefined inputs', () => {
    expect(() => processText(null)).toThrow();
    expect(() => processText(undefined)).toThrow();
  });
});
```

#### 2.8.3 ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
```typescript
describe('error handling', () => {
  it('should throw specific error for invalid input', () => {
    expect(() => {
      validateEmail('invalid-email');
    }).toThrow('Invalid email format');
  });

  it('should handle network errors gracefully', async () => {
    mockApi.get.mockRejectedValue(new Error('Network error'));
    
    const result = await fetchUserData('123');
    
    expect(result.error).toBe('Failed to fetch user data');
  });
});
```

#### 2.8.4 ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
```typescript
describe('edge cases', () => {
  it('should handle special characters in input', () => {
    const specialInput = '!@#$%^&*()_+{}|:"<>?[]\\;\',./<';
    expect(() => processText(specialInput)).not.toThrow();
  });

  it('should handle concurrent operations', async () => {
    const promises = Array(10).fill(null).map(() => processAsync('test'));
    const results = await Promise.all(promises);
    
    expect(results).toHaveLength(10);
    results.forEach(result => {
      expect(result).toBeDefined();
    });
  });
});
```
    â”‚   â””â”€â”€ CaretSystemPromptTestHelper.ts  // í…ŒìŠ¤íŠ¸ ì „ìš© í—¬í¼
    â””â”€â”€ caret-system-prompt-simple.test.ts
```

**í…ŒìŠ¤íŠ¸ì—ì„œ TestHelper ì‚¬ìš©:**

```typescript
import { CaretSystemPromptTestHelper } from "./helpers/CaretSystemPromptTestHelper"

describe("CaretSystemPrompt - Basic Wrapper Implementation", () => {
	let testHelper: CaretSystemPromptTestHelper

	beforeEach(() => {
		testHelper = new CaretSystemPromptTestHelper("/test/extension/path")
	})

	it("should generate system prompt successfully", async () => {
		const result = await testHelper.generateSystemPrompt(mockContext)
		expect(result.prompt).toBeDefined()
	})
})
```

#### 2.4.3 ì˜ˆì™¸: ì •ë§ í•„ìš”í•œ ê²½ìš° ëª…ì‹œì  í‘œì‹œ

**ë§Œì•½ ì„œë¹„ìŠ¤ ì½”ë“œì— í…ŒìŠ¤íŠ¸ ì „ìš© ë©”ì„œë“œê°€ ì •ë§ í•„ìš”í•œ ê²½ìš°:**

```typescript
export class SomeService {
  // âœ… ìš´ì˜ ë©”ì„œë“œ
  doBusinessLogic() { ... }

  // âš ï¸ ì˜ˆì™¸ì ìœ¼ë¡œ í—ˆìš©: ëª…ì‹œì  forTest í‘œì‹œ
  forTestOnly_getInternalState() { ... }
  forTestOnly_resetState() { ... }
}
```

**forTest ì‚¬ìš© ì¡°ê±´:**

-   ë‚´ë¶€ ìƒíƒœ ì ‘ê·¼ì´ ë¶ˆê°€í”¼í•œ ê²½ìš°
-   Mockì´ ë¶ˆê°€ëŠ¥í•œ private ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
-   **ë©”ì„œë“œëª…ì— ë°˜ë“œì‹œ `forTestOnly_` ë˜ëŠ” `forTest_` ì ‘ë‘ì‚¬**

#### 2.4.4 ì•„í‚¤í…ì²˜ ë¶„ë¦¬ì˜ ì¥ì 

**âœ… ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬:**

-   ì„œë¹„ìŠ¤ í´ë˜ìŠ¤: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ë§Œ ì§‘ì¤‘
-   TestHelper: í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì—ë§Œ ì§‘ì¤‘

**âœ… ì½”ë“œ ê°€ë…ì„± í–¥ìƒ:**

-   ìš´ì˜ì§„ì´ ì„œë¹„ìŠ¤ ì½”ë“œë¥¼ ë³¼ ë•Œ í˜¼ë™ ì—†ìŒ
-   í…ŒìŠ¤íŠ¸ ì „ìš© ì½”ë“œê°€ API ë¬¸ì„œì— ë…¸ì¶œë˜ì§€ ì•ŠìŒ

**âœ… ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ :**

-   í…ŒìŠ¤íŠ¸ ì „ìš© ì½”ë“œ ë³€ê²½ì´ ìš´ì˜ ì½”ë“œì— ì˜í–¥ ì—†ìŒ
-   ë¦¬íŒ©í† ë§ ì‹œ ë²”ìœ„ê°€ ëª…í™•íˆ ë¶„ë¦¬ë¨

## 3. í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ë° ë„êµ¬

### 3.1 ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ (caret-src/)

#### 3.1.1 í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

```json
{
	"devDependencies": {
		"vitest": "^3.0.5",
		"@vitest/coverage-v8": "^3.0.9",
		"@types/node": "^22.13.4"
	}
}
```

#### 3.1.2 Vitest ì„¤ì • (vitest.config.ts)

```typescript
import { defineConfig } from "vitest/config"
import path from "path"

export default defineConfig({
	test: {
		environment: "node",
		globals: true,
		include: [
			"caret-src/**/*.test.ts",
			"!src/**/*", // Cline ì›ë³¸ í…ŒìŠ¤íŠ¸ ì œì™¸
		],
		coverage: {
			provider: "v8",
			include: ["caret-src/**/*.ts", "!caret-src/**/*.test.ts", "!caret-src/**/*.d.ts"],
			reportOnFailure: true,
			reporter: ["text", "json", "html"],
		},
		logHeapUsage: false,
		silent: false,
	},
	resolve: {
		alias: {
			"@": path.resolve(__dirname, "./caret-src"),
			"@shared": path.resolve(__dirname, "./src/shared"),
		},
	},
})
```

### 3.2 í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ (webview-ui/src/caret/)

#### 3.2.1 í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

```json
{
	"devDependencies": {
		"@testing-library/react": "^14.0.0",
		"@testing-library/jest-dom": "^6.0.0",
		"@testing-library/user-event": "^14.0.0",
		"vitest": "^1.0.0",
		"@vitejs/plugin-react": "^4.0.0"
	}
}
```

#### 3.2.2 Vitest ì„¤ì • (vitest.config.ts)

```typescript
import { defineConfig } from "vitest/config"
import react from "@vitejs/plugin-react"

export default defineConfig({
	plugins: [react()],
	test: {
		environment: "jsdom",
		setupFiles: ["./src/test-setup.ts"],
		include: ["src/caret/**/*.test.{ts,tsx}"],
		coverage: {
			include: ["src/caret/**/*.{ts,tsx}"],
			exclude: ["src/caret/**/*.test.{ts,tsx}", "src/caret/**/*.d.ts"],
			reporter: ["text", "lcov", "html"],
			reportsDirectory: "coverage/caret-frontend",
		},
	},
})
```

## 4. í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### 4.1 íŒŒì¼ ëª…ëª… ê·œì¹™

#### 4.1.1 í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜

```
caret-src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ webview/
â”‚   â”‚   â”œâ”€â”€ CaretProvider.ts
â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚       â””â”€â”€ CaretProvider.test.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ caret-logger.ts
â”‚       â””â”€â”€ caret-logger.test.ts

webview-ui/src/caret/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CaretWelcome.tsx
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ CaretWelcome.test.tsx
â””â”€â”€ utils/
    â”œâ”€â”€ i18n.ts
    â””â”€â”€ i18n.test.ts
```

#### 4.1.2 í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª…ëª… ê·œì¹™

-   **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: `{ComponentName}.test.{ts|tsx}`
-   **í†µí•© í…ŒìŠ¤íŠ¸**: `{FeatureName}.integration.test.{ts|tsx}`
-   **í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬**: `__tests__/` (ì„ íƒì )

### 4.2 ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ ì‘ì„±

#### 4.2.1 ê¸°ë³¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```typescript
// caret-src/utils/__tests__/caret-logger.test.ts
import { describe, it, expect, vi, beforeEach, afterEach } from "vitest"
import { CaretLogger, CaretLogLevel } from "../caret-logger"

describe("CaretLogger", () => {
	let logger: CaretLogger
	let mockOutputChannel: any

	beforeEach(() => {
		mockOutputChannel = {
			appendLine: vi.fn(),
		}
		logger = new CaretLogger(mockOutputChannel)
	})

	afterEach(() => {
		vi.clearAllMocks()
	})

	describe("constructor", () => {
		it("should create logger with output channel", () => {
			expect(logger).toBeDefined()
		})
	})

	describe("log methods", () => {
		it("should log info message", () => {
			const consoleSpy = vi.spyOn(console, "info")
			logger.info("test message", "TEST")

			expect(mockOutputChannel.appendLine).toHaveBeenCalled()
			expect(consoleSpy).toHaveBeenCalled()
		})

		it("should log error message", () => {
			const consoleSpy = vi.spyOn(console, "error")
			logger.error("error message", "ERROR")

			expect(mockOutputChannel.appendLine).toHaveBeenCalled()
			expect(consoleSpy).toHaveBeenCalled()
		})
	})
})
```

#### 4.2.2 Vitest ëª¨í‚¹ íŒ¨í„´ ë° ëª¨ë²” ì‚¬ë¡€ ğŸš¨ **í•„ìˆ˜ ìˆ™ì§€**

**ì´ ì„¹ì…˜ì€ ë°˜ë³µì ì¸ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ í•µì‹¬ ê°€ì´ë“œì…ë‹ˆë‹¤.**

##### 4.2.2.1 í•µì‹¬ ëª¨í‚¹ íŒ¨í„´ ë° ì£¼ì˜ì‚¬í•­

**ğŸš¨ ì£¼ìš” ì›ì¹™:**
- `vi.mock()` ë¸”ë¡ ë‚´ì—ì„œ ëª¨ë“  ëª¨í‚¹ ì •ì˜ (í˜¸ì´ìŠ¤íŒ… ë¬¸ì œ ë°©ì§€)
- `vi.clearAllMocks()` ì‚¬ìš© (`vi.resetAllMocks()` ê¸ˆì§€)
- Node.js ë‚´ì¥ ëª¨ë“ˆ í˜¼í•© ëª¨í‚¹ ë°©ì‹ ê¸ˆì§€

**âœ… ê¸°ë³¸ ëª¨í‚¹ í…œí”Œë¦¿:**

```typescript
// VSCode API ëª¨í‚¹ (í•„ìˆ˜)
vi.mock("vscode", () => ({
  ExtensionContext: vi.fn(),
  Uri: {
    file: vi.fn((path) => ({ fsPath: path, toString: () => path })),
    parse: vi.fn((uri) => ({ fsPath: uri, toString: () => uri })),
  },
  ExtensionMode: { Development: 1, Production: 2, Test: 3 },
  window: {
    createOutputChannel: vi.fn((name) => ({
      appendLine: vi.fn(), show: vi.fn(), dispose: vi.fn(), name
    })),
    showErrorMessage: vi.fn(),
  },
  env: { openExternal: vi.fn() },
  workspace: { onDidChangeConfiguration: vi.fn() },
}))

// fs ëª¨í‚¹ (ì¡°ê±´ë¶€ ë¡œì§)
vi.mock("fs", () => ({
  existsSync: vi.fn(() => true),
  promises: {
    readFile: vi.fn((path) => {
      if (path.includes(".env.dev")) return Promise.resolve("ENV=dev")
      return Promise.resolve(Buffer.from("data", "base64"))
    })
  }
}))

// í…ŒìŠ¤íŠ¸ ê²©ë¦¬
beforeEach(() => vi.clearAllMocks())
```

##### 4.2.2.2 Node.js ë‚´ì¥ ëª¨ë“ˆ ëª¨í‚¹ âš ï¸ **íŠ¹ë³„ ì£¼ì˜**

**ğŸš¨ ì ˆëŒ€ ê¸ˆì§€: ëª¨í‚¹ ë°©ì‹ í˜¼í•© ì‚¬ìš©**

```typescript
// âŒ ê¸ˆì§€: vi.mock + vi.spyOn í˜¼í•©
vi.mock("fs", () => ({ existsSync: vi.fn() }))
vi.spyOn(fs, "existsSync") // ğŸš¨ Cannot redefine property ì˜¤ë¥˜!

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: vi.mocked ì‚¬ìš©
vi.mock("fs", () => ({ existsSync: vi.fn() }))
vi.mocked(fs.existsSync).mockReturnValue(true)
```

**ğŸš¨ í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ëª¨í‚¹ ë°©ì‹ í†µì¼ (`vi.mock` ë˜ëŠ” `vi.mocked` ì¤‘ í•˜ë‚˜ë§Œ)
- [ ] í˜¼í•© ì‚¬ìš© ê¸ˆì§€ (`vi.mock` + `vi.spyOn` + `vi.importMock`)
- [ ] `vi.clearAllMocks()` ì‚¬ìš© (`vi.resetAllMocks()` ê¸ˆì§€)
- [ ] Promise ëª¨í‚¹ ì‹œ `Promise.resolve()` ì‚¬ìš©

#### 4.2.3 VSCode API ëª¨í‚¹ (ê¸°ì¡´ ë‚´ìš© ìœ ì§€)

```typescript
// caret-src/__tests__/setup.ts
import { vi } from "vitest"

// VSCode API ëª¨í‚¹ (Vitest)
vi.mock("vscode", () => ({
	window: {
		createOutputChannel: vi.fn(() => ({
			appendLine: vi.fn(),
			show: vi.fn(),
			dispose: vi.fn(),
		})),
		showErrorMessage: vi.fn(),
		showInformationMessage: vi.fn(),
	},
	ExtensionContext: vi.fn(),
	Uri: {
		file: vi.fn(),
		parse: vi.fn(),
	},
}))
```

### 4.3 í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ ì‘ì„±

#### 4.3.1 React ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

```typescript
// webview-ui/src/caret/components/__tests__/CaretWelcome.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { CaretWelcome } from '../CaretWelcome';

describe('CaretWelcome', () => {
  it('should render welcome message', () => {
    render(<CaretWelcome />);
    expect(screen.getByText(/Caretì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤/)).toBeInTheDocument();
  });

  it('should handle button click', async () => {
    const mockOnClick = vi.fn();
    render(<CaretWelcome onStartClick={mockOnClick} />);

    const startButton = screen.getByRole('button', { name: /ì‹œì‘í•˜ê¸°/ });
    fireEvent.click(startButton);

    expect(mockOnClick).toHaveBeenCalledTimes(1);
  });

  it('should display Korean text correctly', () => {
    render(<CaretWelcome />);
    expect(screen.getByText('ë°”ì´ë¸Œ ì½”ë”©')).toBeInTheDocument();
  });
});
```

#### 4.3.2 ì»¤ìŠ¤í…€ í›… í…ŒìŠ¤íŠ¸

```typescript
// webview-ui/src/caret/hooks/__tests__/useCaretState.test.ts
import { renderHook, act } from "@testing-library/react"
import { describe, it, expect } from "vitest"
import { useCaretState } from "../useCaretState"

describe("useCaretState", () => {
	it("should initialize with default state", () => {
		const { result } = renderHook(() => useCaretState())

		expect(result.current.isReady).toBe(false)
		expect(result.current.currentMode).toBe("welcome")
	})

	it("should update state correctly", () => {
		const { result } = renderHook(() => useCaretState())

		act(() => {
			result.current.setReady(true)
		})

		expect(result.current.isReady).toBe(true)
	})
})
```

### 4.4 í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±

#### 4.4.1 ì‹œìŠ¤í…œ ë ˆë²¨ í†µí•© í…ŒìŠ¤íŠ¸ (ìƒˆë¡œìš´ ë°©ì‹)

```typescript
// caret-src/__tests__/integration.test.ts
import { describe, it, expect } from "vitest"
import { spawn } from "child_process"
import { promisify } from "util"

const execAsync = promisify(require("child_process").exec)

describe("Integration Tests", () => {
	it("should compile backend successfully", async () => {
		try {
			const { stdout, stderr } = await execAsync("npm run check-types")
			expect(stderr).toBe("")
			expect(stdout).toContain("tsc --noEmit")
		} catch (error: any) {
			throw new Error(`Backend compilation failed: ${error.message}`)
		}
	}, 30000)

	it("should build webview-ui successfully", async () => {
		try {
			const { stdout, stderr } = await execAsync("cd webview-ui && npm run build")
			expect(stdout).toContain("vite")
			expect(stdout).toContain("building for production")
			expect(stderr).not.toContain("Build failed")
			expect(stderr).not.toContain("error during build")
		} catch (error: any) {
			throw new Error(`Webview-UI build failed: ${error.message}`)
		}
	}, 60000)

	it("should have grpc-client files in ES6 module format", async () => {
		const fs = require("fs")
		const path = require("path")

		try {
			const grpcClientPath = path.join(process.cwd(), "webview-ui/src/services/grpc-client.js")
			const content = fs.readFileSync(grpcClientPath, "utf8")

			expect(content).toContain("import {")
			expect(content).toContain("export const")
			expect(content).not.toContain("require(")
			expect(content).not.toContain("exports.")
			expect(content).toContain("StateServiceClient")
		} catch (error: any) {
			throw new Error(`GRPC client format check failed: ${error.message}`)
		}
	})

	it("should have consistent rule priority logic", async () => {
		try {
			const { stdout } = await execAsync("npm run test:backend -- rule-priority")
			expect(stdout).toContain("6 passed")
		} catch (error: any) {
			throw new Error(`Rule priority tests failed: ${error.message}`)
		}
	}, 30000)
})
```

**ì£¼ìš” íŠ¹ì§•:**

-   **ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰**: `npm run build`, `npm run compile` ë“± ì‹¤ì œ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ê²€ì¦
-   **í¬ë¡œìŠ¤ í”Œë«í¼ í˜¸í™˜**: Windows/Linux/Mac í™˜ê²½ ê³ ë ¤
-   **ë¹Œë“œ ì—ëŸ¬ ê°ì§€**: í…ŒìŠ¤íŠ¸ì—ì„œ ë†“ì¹  ìˆ˜ ìˆëŠ” ì‹¤ì œ ë¹Œë“œ ë¬¸ì œ ì¡°ê¸° ë°œê²¬
-   **ES6 ëª¨ë“ˆ í˜•ì‹ ê²€ì¦**: CommonJS/ES6 ëª¨ë“ˆ í˜¸í™˜ì„± ë¬¸ì œ ê°ì§€
-   **ì¥ì‹œê°„ íƒ€ì„ì•„ì›ƒ**: ì‹¤ì œ ë¹Œë“œ ì‹œê°„ì„ ê³ ë ¤í•œ íƒ€ì„ì•„ì›ƒ ì„¤ì •

#### 4.4.2 ë°±ì—”ë“œ-í”„ë¡ íŠ¸ì—”ë“œ í†µì‹  í…ŒìŠ¤íŠ¸ (ê¸°ì¡´ ë°©ì‹)

```typescript
// src/test/integration/webview-communication.test.ts
import * as vscode from "vscode"
import { CaretProvider } from "../../caret-src/core/webview/CaretProvider"

describe("Webview Communication Integration", () => {
	let provider: CaretProvider
	let mockContext: vscode.ExtensionContext

	beforeEach(() => {
		mockContext = {
			subscriptions: [],
			extensionUri: vscode.Uri.file("/test"),
		} as any
		provider = new CaretProvider(mockContext)
	})

	it("should handle message from webview", async () => {
		const testMessage = { type: "test", data: "hello" }

		// ë©”ì‹œì§€ ì „ì†¡ ì‹œë®¬ë ˆì´ì…˜
		await provider.handleWebviewMessage(testMessage)

		// ì‘ë‹µ ê²€ì¦
		expect(provider.lastResponse).toEqual({
			type: "response",
			data: "received: hello",
		})
	})
})
```

## 5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### 5.1 ê°œë°œ ì¤‘ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

#### 5.1.1 ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:backend

# ì»¤ë²„ë¦¬ì§€ì™€ í•¨ê»˜ ì‹¤í–‰
npm run test:backend:coverage

# íŠ¹ì • íŒŒì¼ í…ŒìŠ¤íŠ¸
npm run test:backend -- CaretProvider.test.ts

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:backend -- integration

# Watch ëª¨ë“œ
npm run test:backend:watch
```

#### 5.1.2 í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:frontend

# ì»¤ë²„ë¦¬ì§€ì™€ í•¨ê»˜ ì‹¤í–‰
npm run test:frontend:coverage

# íŠ¹ì • ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
npm run test:frontend -- CaretWelcome.test.tsx

# Watch ëª¨ë“œ
npm run test:frontend:watch
```

### 5.2 ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

#### 5.2.1 ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ (ë°±ì—”ë“œ + í”„ë¡ íŠ¸ì—”ë“œ)
npm test

# ì»¤ë²„ë¦¬ì§€ í¬í•¨ ì „ì²´ í…ŒìŠ¤íŠ¸
npm run test:coverage

# CI/CDìš© í…ŒìŠ¤íŠ¸ (ë³‘ë ¬ ì‹¤í–‰)
npm run test:ci
```

#### 5.2.2 ì»¤ë²„ë¦¬ì§€ ë¶„ì„

```bash
# Caret ì „ìš© ì»¤ë²„ë¦¬ì§€ ë¶„ì„
node caret-scripts/caret-coverage-check.js

# ìƒì„¸ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
npm run coverage:report
```

### 5.1 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´

#### 5.1.1 `npm run test:all` â­ **(ê¶Œì¥) í†µí•© í…ŒìŠ¤íŠ¸ (ë°±ì—”ë“œ + í”„ë¡ íŠ¸ì—”ë“œ)**

-   **ì„¤ëª…**: ê°€ì¥ ì•ˆì •ì ì´ê³  í¬ê´„ì ì¸ ì „ì²´ í…ŒìŠ¤íŠ¸ ë°©ë²•ì…ë‹ˆë‹¤. ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œì˜ ëª¨ë“  Vitest ê¸°ë°˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
-   **ì‹¤í–‰**: `npm run test:all`
-   **ì‚¬ìš© ì‹œì **:
    -   ë¡œì»¬ ê°œë°œ ì¤‘ ìˆ˜ì‹œë¡œ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë³€ê²½ ì‚¬í•­ ê²€ì¦
    -   Git ì»¤ë°‹ ë° í‘¸ì‹œ ì „ í•„ìˆ˜ ì‹¤í–‰í•˜ì—¬ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
-   **ëª©í‘œ ìƒíƒœ**: **í•­ìƒ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (All Pass)**. CI/CD íŒŒì´í”„ë¼ì¸ì˜ í•µì‹¬ ê²€ì¦ ë‹¨ê³„ì…ë‹ˆë‹¤.
-   **í˜„ì¬ ìƒíƒœ**: ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ í†µê³¼í•©ë‹ˆë‹¤.

#### 5.1.2 `npm test` âš ï¸ **(ì£¼ì˜) ì „ì²´ í…ŒìŠ¤íŠ¸ (ë‹¨ìœ„ + í†µí•©)**

-   **ì„¤ëª…**: `package.json`ì˜ ë©”ì¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¡œ, `pretest` (ë¹Œë“œ, `test:all` í¬í•¨ ê°€ëŠ¥ì„±) í›„ ì¶”ê°€ì ì¸ ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (í˜„ì¬ëŠ” `test:all`ê³¼ ìœ ì‚¬í•˜ê²Œ ë™ì‘í•˜ë‚˜, ê³¼ê±° ESM ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.)
-   **ì‹¤í–‰**: `npm test`
-   **ì‚¬ìš© ì‹œì **: í”„ë¡œì íŠ¸ì˜ ê³µì‹ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë‚˜, í˜„ì¬ëŠ” `npm run test:all`ì˜ ì•ˆì •ì„±ì„ ë” ê¶Œì¥í•©ë‹ˆë‹¤.
-   **ì£¼ì˜ì‚¬í•­**: ê³¼ê±° `@google/genai` ESM ê´€ë ¨ ì´ìŠˆë¡œ ì‹¤íŒ¨ ê°€ëŠ¥ì„±ì´ ìˆì—ˆìœ¼ë¯€ë¡œ, `npm run test:all` ì‚¬ìš©ì„ ìš°ì„ ì ìœ¼ë¡œ ê¶Œì¥í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” `npm run test:all`ê³¼ ë™ì¼í•˜ê²Œ ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•©ë‹ˆë‹¤.

#### 5.1.3 ê°œë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:backend

# ì»¤ë²„ë¦¬ì§€ì™€ í•¨ê»˜ ì‹¤í–‰
npm run test:backend:coverage

# íŠ¹ì • íŒŒì¼ í…ŒìŠ¤íŠ¸
npm run test:backend -- CaretProvider.test.ts

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:backend -- integration

# Watch ëª¨ë“œ
npm run test:backend:watch
```

## 6. í†µí•© í…ŒìŠ¤íŠ¸ êµ¬í˜„ ë³€í™” (2025-01-21 ì—…ë°ì´íŠ¸)

### 6.1 ìƒˆë¡œìš´ í†µí•© í…ŒìŠ¤íŠ¸ ë°©ì‹

#### 6.1.1 ë³€ê²½ ë°°ê²½

ê¸°ì¡´ì˜ í†µí•© í…ŒìŠ¤íŠ¸ëŠ” ëª¨í‚¹ëœ í™˜ê²½ì—ì„œë§Œ ë™ì‘í•˜ì—¬ **ì‹¤ì œ ë¹Œë“œ ì—ëŸ¬ë¥¼ ê°ì§€í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œ**ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
íŠ¹íˆ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤:

-   **CommonJS vs ES6 ëª¨ë“ˆ í˜¸í™˜ì„± ë¬¸ì œ**: `grpc-client.js`ê°€ CommonJS í˜•ì‹ì´ì—ˆëŠ”ë° TypeScriptì—ì„œ ES6 import ì‚¬ìš©
-   **ë¹Œë“œ ì„±ê³µ vs í…ŒìŠ¤íŠ¸ í†µê³¼ ë¶ˆì¼ì¹˜**: í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í•˜ì§€ë§Œ ì‹¤ì œ ë¹Œë“œëŠ” ì‹¤íŒ¨í•˜ëŠ” ìƒí™©
-   **í”„ë¡œí† ì½œ ë²„í¼ ìƒì„± íŒŒì¼ ê²€ì¦ ë¶€ì¡±**: ìë™ ìƒì„± íŒŒì¼ì˜ í˜•ì‹ ê²€ì¦ ëˆ„ë½

#### 6.1.2 ìƒˆë¡œìš´ ì ‘ê·¼ ë°©ì‹

**ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰ ê¸°ë°˜ í†µí•© í…ŒìŠ¤íŠ¸**ë¡œ ë³€ê²½í•˜ì—¬ ë‹¤ìŒì„ ê²€ì¦í•©ë‹ˆë‹¤:

1. **ì‹¤ì œ ë°±ì—”ë“œ ì»´íŒŒì¼**: `npm run check-types` ì‹¤í–‰ìœ¼ë¡œ TypeScript ì»´íŒŒì¼ ê²€ì¦
2. **ì‹¤ì œ í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ**: `npm run build` ì‹¤í–‰ìœ¼ë¡œ Vite ë¹Œë“œ ê²€ì¦
3. **íŒŒì¼ í˜•ì‹ ê²€ì¦**: ìë™ ìƒì„±ëœ íŒŒì¼ë“¤ì˜ ì‹¤ì œ ë‚´ìš© ê²€ì¦
4. **ê¸°ëŠ¥ë³„ í…ŒìŠ¤íŠ¸ ì—°ë™**: íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²€ì¦

#### 6.1.3 êµ¬í˜„ëœ ê²€ì¦ í•­ëª©

```typescript
// ì‹¤ì œ êµ¬í˜„ëœ í†µí•© í…ŒìŠ¤íŠ¸ í•­ëª©ë“¤
describe("Integration Tests", () => {
	// 1. ë°±ì—”ë“œ TypeScript ì»´íŒŒì¼ ê²€ì¦
	it("should compile backend successfully", async () => {
		const { stdout, stderr } = await execAsync("npm run check-types")
		expect(stderr).toBe("")
		expect(stdout).toContain("tsc --noEmit")
	}, 30000)

	// 2. í”„ë¡ íŠ¸ì—”ë“œ Vite ë¹Œë“œ ê²€ì¦
	it("should build webview-ui successfully", async () => {
		const { stdout, stderr } = await execAsync("cd webview-ui && npm run build")
		expect(stdout).toContain("vite")
		expect(stdout).toContain("building for production")
		expect(stderr).not.toContain("Build failed")
	}, 60000)

	// 3. ìë™ ìƒì„± íŒŒì¼ í˜•ì‹ ê²€ì¦
	it("should have grpc-client files in ES6 module format", async () => {
		const content = fs.readFileSync("webview-ui/src/services/grpc-client.js", "utf8")
		expect(content).toContain("import {")
		expect(content).toContain("export const")
		expect(content).not.toContain("require(")
	})

	// 4. íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ê²€ì¦
	it("should have consistent rule priority logic", async () => {
		const { stdout } = await execAsync("npm run test:backend -- rule-priority")
		expect(stdout).toContain("6 passed")
	}, 30000)
})
```

#### 6.1.4 í¬ë¡œìŠ¤ í”Œë«í¼ ê³ ë ¤ì‚¬í•­

Windows í™˜ê²½ì—ì„œ `head` ëª…ë ¹ì–´ê°€ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´:

-   **íŒŒì¼ ì‹œìŠ¤í…œ API ì‚¬ìš©**: `fs.readFileSync()` ì§ì ‘ ì‚¬ìš©
-   **PowerShell í˜¸í™˜**: Windows PowerShellì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•œ ëª…ë ¹ì–´ë§Œ ì‚¬ìš©
-   **ê²½ë¡œ ì²˜ë¦¬**: `path.join()`ìœ¼ë¡œ í¬ë¡œìŠ¤ í”Œë«í¼ ê²½ë¡œ ì²˜ë¦¬

### 6.2 í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²• ë° ê²°ê³¼

#### 6.2.1 ê°œë³„ ì‹¤í–‰

```bash
# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npx vitest run caret-src/__tests__/integration.test.ts

# íŠ¹ì • í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npx vitest run caret-src/__tests__/integration.test.ts -t "should build webview-ui"
```

#### 6.2.2 ì „ì²´ í…ŒìŠ¤íŠ¸ì—ì„œì˜ ì—­í•  ë° ê²°ê³¼

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ í†µí•© í…ŒìŠ¤íŠ¸ë„ í¬í•¨
npm test
# â†’ pretest â†’ compile â†’ test:all
# â†’ í”„ë¡ íŠ¸ì—”ë“œ: 80ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼ âœ…
# â†’ ë°±ì—”ë“œ: 30ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼ (í†µí•©í…ŒìŠ¤íŠ¸ 5ê°œ í¬í•¨) âœ…
# â†’ ì´ 110ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼ ğŸ‰
```

#### 6.2.3 CI/CDì—ì„œì˜ í™œìš©

í†µí•© í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œ ë¹Œë“œ ë¬¸ì œë¥¼ ì¡°ê¸°ì— ê°ì§€í•˜ë¯€ë¡œ:

-   **ë¹Œë“œ íŒŒì´í”„ë¼ì¸ ì‹ ë¢°ì„± í–¥ìƒ**
-   **ë°°í¬ ì „ ì‹¤ì œ ë™ì‘ ê²€ì¦**
-   **ê°œë°œì ë¡œì»¬ í™˜ê²½ê³¼ CI í™˜ê²½ ì¼ì¹˜ì„± í™•ì¸**

## 7. í…ŒìŠ¤íŠ¸ í’ˆì§ˆ ê¸°ì¤€

### 7.1 ì»¤ë²„ë¦¬ì§€ ê¸°ì¤€

#### 7.1.1 Caret ì „ìš© ì½”ë“œ

-   **Statement Coverage**: 100%
-   **Function Coverage**: 100%
-   **Branch Coverage**: 100%
-   **Line Coverage**: 100%

#### 7.1.2 Cline ì›ë³¸ ì½”ë“œ

-   **ì°¸ê³ ìš© ëª¨ë‹ˆí„°ë§**: í˜„ì¬ ìƒíƒœ ìœ ì§€
-   **íšŒê·€ í…ŒìŠ¤íŠ¸**: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸

### 7.2 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í’ˆì§ˆ

#### 7.2.1 í•„ìˆ˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

-   **ì •ìƒ ê²½ë¡œ (Happy Path)**: ê¸°ë³¸ ê¸°ëŠ¥ ë™ì‘
-   **ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸**: ìµœì†Œ/ìµœëŒ€ê°’, ë¹ˆ ê°’ ë“±
-   **ì˜ˆì™¸ ì²˜ë¦¬**: ì˜¤ë¥˜ ìƒí™© ëŒ€ì‘
-   **ì—£ì§€ ì¼€ì´ìŠ¤**: íŠ¹ìˆ˜í•œ ìƒí™©ë“¤
-   **í†µí•© ì‹œë‚˜ë¦¬ì˜¤**: ì‹¤ì œ ë¹Œë“œ/ë°°í¬ í”„ë¡œì„¸ìŠ¤ ê²€ì¦ (ì‹ ê·œ ì¶”ê°€)

#### 7.2.2 í…ŒìŠ¤íŠ¸ ì½”ë“œ í’ˆì§ˆ

-   **ê°€ë…ì„±**: ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ì´ë¦„ê³¼ êµ¬ì¡°
-   **ë…ë¦½ì„±**: í…ŒìŠ¤íŠ¸ ê°„ ì˜ì¡´ì„± ì—†ìŒ
-   **ë°˜ë³µì„±**: ë™ì¼í•œ ê²°ê³¼ ë³´ì¥
-   **ì†ë„**: ë¹ ë¥¸ ì‹¤í–‰ ì‹œê°„

## 7. CI/CD í†µí•©

### 7.1 GitHub Actions ì„¤ì •

```yaml
# .github/workflows/test.yml
name: Test Coverage

on: [push, pull_request]

jobs:
    test:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install dependencies
              run: npm ci

            - name: Run tests with coverage
              run: npm run test:coverage

            - name: Check Caret coverage
              run: node caret-scripts/caret-coverage-check.js

            - name: Upload coverage
              uses: codecov/codecov-action@v3
              with:
                  file: ./coverage/lcov.info
```

### 7.2 Pre-commit í›…

```bash
# .husky/pre-commit
#!/bin/sh
npm run test:quick
npm run lint
```

## 8. ëª¨ë²” ì‚¬ë¡€

### 8.1 í…ŒìŠ¤íŠ¸ ì‘ì„± ëª¨ë²” ì‚¬ë¡€

#### 8.1.1 AAA íŒ¨í„´

```typescript
describe("CaretLogger", () => {
	it("should format log message correctly", () => {
		// Arrange (ì¤€ë¹„)
		const logger = new CaretLogger("test")
		const message = "test message"

		// Act (ì‹¤í–‰)
		const result = logger.formatMessage("INFO", message)

		// Assert (ê²€ì¦)
		expect(result).toBe("[INFO][test] test message")
	})
})
```

#### 8.1.2 ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ì´ë¦„

```typescript
// ì¢‹ì€ ì˜ˆ
it("should return error when API key is missing", () => {})
it("should render loading spinner while fetching data", () => {})

// ë‚˜ìœ ì˜ˆ
it("should work", () => {})
it("test API", () => {})
```

### 8.2 Mock ì‚¬ìš© ê°€ì´ë“œ

#### 8.2.1 ì™¸ë¶€ ì˜ì¡´ì„± ëª¨í‚¹

```typescript
// API í˜¸ì¶œ ëª¨í‚¹
jest.mock("../api/client", () => ({
	fetchData: jest.fn().mockResolvedValue({ data: "test" }),
}))

// VSCode API ëª¨í‚¹
jest.mock("vscode", () => ({
	window: {
		showInformationMessage: jest.fn(),
	},
}))
```

#### 8.2.2 ì‹œê°„ ê´€ë ¨ í…ŒìŠ¤íŠ¸

```typescript
describe("timestamp functionality", () => {
	beforeEach(() => {
		jest.useFakeTimers()
		jest.setSystemTime(new Date("2024-01-01"))
	})

	afterEach(() => {
		jest.useRealTimers()
	})

	it("should generate correct timestamp", () => {
		const timestamp = generateTimestamp()
		expect(timestamp).toBe("2024-01-01T00:00:00.000Z")
	})
})
```

## 9. ë¬¸ì œ í•´ê²° ë° AI ê°œë°œì ê°€ì´ë“œ ğŸ”

### 9.1 í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ ë””ë²„ê¹… ì „ëµ

**ğŸš¨ ì˜¤ë¥˜ ìœ í˜•ë³„ í•´ê²°ë²•:**

```bash
"Cannot read properties of undefined" â†’ ëª¨í‚¹ ëˆ„ë½
"Cannot redefine property" â†’ ëª¨í‚¹ ë°©ì‹ ì¶©ëŒ (vi.mock + vi.spyOn)
"ReferenceError: before initialization" â†’ í˜¸ì´ìŠ¤íŒ… ë¬¸ì œ
"AssertionError: expected X to equal Y" â†’ ë°ì´í„° ë¶ˆì¼ì¹˜
"TypeError: X is not a function" â†’ í•¨ìˆ˜ ëª¨í‚¹ ëˆ„ë½
```

**ğŸ”§ ë””ë²„ê¹… ì½”ë“œ:**

```typescript
// ëª¨í‚¹ ìƒíƒœ í™•ì¸
console.log("Mock calls:", vi.mocked(fn).mock.calls)
console.log("Is mocked:", vi.isMockFunction(fn))

// í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ë¬¸ì œ í•´ê²°
beforeEach(() => {
  vi.clearAllMocks()
  vi.mocked(fn).mockImplementation(() => expectedValue)
})
```

### 9.2 Mock ë° Stub ì‚¬ìš© í‘œì¤€

#### 9.2.1 Mock ì‚¬ìš© ì›ì¹™

**ì™¸ë¶€ ì˜ì¡´ì„± ëª¨í‚¹:**
```typescript
// âœ… ì¢‹ì€ ëª¨í‚¹ - êµ¬ì²´ì ì´ê³  ëª…í™•
vi.mock('../api/userApi', () => ({
  fetchUser: vi.fn(),
  updateUser: vi.fn(),
  deleteUser: vi.fn()
}));

// âŒ ë‚˜ìœ ëª¨í‚¹ - ë„ˆë¬´ ê´‘ë²”ìœ„
vi.mock('../api', () => ({}));
```

**VSCode API ëª¨í‚¹:**
```typescript
// VSCode API í‘œì¤€ ëª¨í‚¹
vi.mock('vscode', () => ({
  window: {
    createOutputChannel: vi.fn(() => ({
      appendLine: vi.fn(),
      show: vi.fn(),
      dispose: vi.fn()
    })),
    showErrorMessage: vi.fn(),
    showInformationMessage: vi.fn(),
    showWarningMessage: vi.fn()
  },
  workspace: {
    getConfiguration: vi.fn(() => ({
      get: vi.fn(),
      update: vi.fn()
    }))
  },
  Uri: {
    file: vi.fn(),
    parse: vi.fn()
  }
}));
```

#### 9.2.2 Mock ë°ì´í„° ê´€ë¦¬

**í…ŒìŠ¤íŠ¸ ë°ì´í„° íŒŒì¼:**
```typescript
// __tests__/fixtures/userData.ts
export const mockUserData = {
  valid: {
    id: '123',
    name: 'Test User',
    email: 'test@example.com'
  },
  invalid: {
    id: '',
    name: '',
    email: 'invalid-email'
  }
};

// í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©
import { mockUserData } from './fixtures/userData';

it('should validate user data', () => {
  expect(validateUser(mockUserData.valid)).toBe(true);
  expect(validateUser(mockUserData.invalid)).toBe(false);
});
```

**Factory í•¨ìˆ˜ ì‚¬ìš©:**
```typescript
// __tests__/factories/userFactory.ts
export const createMockUser = (overrides = {}) => ({
  id: '123',
  name: 'Test User',
  email: 'test@example.com',
  createdAt: new Date('2024-01-01'),
  ...overrides
});

// í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©
it('should handle different user types', () => {
  const adminUser = createMockUser({ role: 'admin' });
  const guestUser = createMockUser({ role: 'guest' });
  
  expect(hasPermission(adminUser, 'delete')).toBe(true);
  expect(hasPermission(guestUser, 'delete')).toBe(false);
});
```

### 9.3 í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ë° ìµœì í™”

#### 9.3.1 í…ŒìŠ¤íŠ¸ ì†ë„ ìµœì í™”

**ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ì‘ì„±:**
```typescript
// âœ… ì¢‹ì€ ì˜ˆ - ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
describe('utility functions', () => {
  it('should format string quickly', () => {
    const result = formatString('test');
    expect(result).toBe('TEST');
  });
});

// âŒ ë‚˜ìœ ì˜ˆ - ëŠë¦° í…ŒìŠ¤íŠ¸
describe('heavy operations', () => {
  it('should process large dataset', () => {
    const largeData = Array(1000000).fill(0); // ë„ˆë¬´ í° ë°ì´í„°
    const result = processData(largeData);
    expect(result).toBeDefined();
  });
});
```

#### 9.3.2 í…ŒìŠ¤íŠ¸ ê²©ë¦¬

**ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ ë³´ì¥:**
```typescript
describe('isolated tests', () => {
  beforeEach(() => {
    // ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ê¹¨ë—í•œ ìƒíƒœë¡œ ì‹œì‘
    localStorage.clear();
    vi.clearAllMocks();
  });

  afterEach(() => {
    // í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬
    vi.restoreAllMocks();
  });

  it('should not affect other tests', () => {
    localStorage.setItem('test', 'value');
    expect(localStorage.getItem('test')).toBe('value');
  });
});
```

### 9.4 ë””ë²„ê¹… íŒ

#### 9.4.1 í…ŒìŠ¤íŠ¸ ë””ë²„ê¹… ë„êµ¬

**ìœ ìš©í•œ ë””ë²„ê¹… ë„êµ¬ë“¤:**
```typescript
// 1. screen.debug() - í˜„ì¬ DOM ìƒíƒœ ì¶œë ¥
it('should render correctly', () => {
  render(<Component />);
  screen.debug(); // DOM êµ¬ì¡° í™•ì¸
});

// 2. console.logë¡œ ê°’ í™•ì¸
it('should process data', () => {
  const result = processData(input);
  console.log('Result:', result); // ê²°ê³¼ ê°’ í™•ì¸
  expect(result).toBeDefined();
});

// 3. í…ŒìŠ¤íŠ¸ ê²©ë¦¬ í™•ì¸
describe.only('focused test', () => {
  // ì´ describe ë¸”ë¡ë§Œ ì‹¤í–‰
});

it.only('focused test', () => {
  // ì´ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
});
```

#### 9.4.2 ì¼ë°˜ì ì¸ ì˜¤ë¥˜ í•´ê²°

**VSCode API ê´€ë ¨ ì˜¤ë¥˜:**
```typescript
// ì˜¤ë¥˜: Cannot find module 'vscode'
// í•´ê²°: ì ì ˆí•œ ëª¨í‚¹ ì¶”ê°€
vi.mock('vscode', () => ({
  // í•„ìš”í•œ APIë§Œ ëª¨í‚¹
}));
```

**ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:**
```typescript
// ì˜¤ë¥˜: Test timeout
// í•´ê²°: async/await ì˜¬ë°”ë¥¸ ì‚¬ìš©
it('should handle async operation', async () => {
  await expect(asyncFunction()).resolves.toBeDefined();
});
```

**React í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:**
```typescript
// ì˜¤ë¥˜: Unable to find an element
// í•´ê²°: ì˜¬ë°”ë¥¸ ì¿¼ë¦¬ ì‚¬ìš©
// âŒ ë‚˜ìœ ì˜ˆ
screen.getByText('ì •í™•í•˜ì§€ ì•Šì€ í…ìŠ¤íŠ¸');

// âœ… ì¢‹ì€ ì˜ˆ
screen.getByRole('button', { name: /ì‹œì‘í•˜ê¸°/ });
```

### 9.5 AI ê°œë°œì í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ ğŸ¤–

**ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‘ì„± ì „:**
- [ ] TDD ìˆœì„œ í™•ì¸ (RED â†’ GREEN â†’ REFACTOR)
- [ ] í…ŒìŠ¤íŠ¸ ëª©ì  ëª…í™•í™”
- [ ] í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜ ê²°ì • (caret-src vs src)
- [ ] ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒ¨í„´ ê²€í† 

**ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‘ì„± ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ëª¨ë“  public ë©”ì„œë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] ëª¨ë“  private ë©”ì„œë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì‘ì„± (í•„ìš”ì‹œ)
- [ ] ëª¨ë“  if/else ë¸Œëœì¹˜ í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë“  ì˜ˆì™¸ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ (ë¹ˆ ê°’, null, undefined ë“±)
- [ ] ë¹„ë™ê¸° ë™ì‘ í…ŒìŠ¤íŠ¸
- [ ] Mock ë° Stub ì ì ˆíˆ ì‚¬ìš©
- [ ] í…ŒìŠ¤íŠ¸ ì´ë¦„ì´ ëª…í™•í•˜ê³  êµ¬ì²´ì 
- [ ] AAA íŒ¨í„´ ì¤€ìˆ˜
- [ ] í…ŒìŠ¤íŠ¸ ê°„ ë…ë¦½ì„± ë³´ì¥

**ğŸ“‹ ì»¤ë²„ë¦¬ì§€ ë‹¬ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] Statement Coverage: 100%
- [ ] Branch Coverage: 100%
- [ ] Function Coverage: 100%
- [ ] Line Coverage: 100%
- [ ] ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ì—ì„œ ëˆ„ë½ ë¶€ë¶„ ì—†ìŒ
- [ ] `caret-scripts/caret-coverage-check.js` í†µê³¼

**ğŸ“‹ ì½”ë“œ í’ˆì§ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ì´ í•©ë¦¬ì  (ì „ì²´ < 30ì´ˆ)
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥
- [ ] Mock ì‚¬ìš©ì´ ì ì ˆí•˜ê³  ê³¼ë„í•˜ì§€ ì•ŠìŒ
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì½ê¸° ì‰½ê³  ì´í•´í•˜ê¸° ì‰¬ì›€
- [ ] ì¤‘ë³µ ì½”ë“œ ìµœì†Œí™”
- [ ] í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ëª…í™•í•˜ê³  ì˜ë¯¸ ìˆìŒ
- [ ] TestHelper íŒ¨í„´ ì‚¬ìš© (ì„œë¹„ìŠ¤ ì½”ë“œì— í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ê¸ˆì§€)

**ğŸ“‹ TDD í”„ë¡œì„¸ìŠ¤ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„± (Red)
- [ ] í…ŒìŠ¤íŠ¸ í†µê³¼í•˜ëŠ” ìµœì†Œ ì½”ë“œ ì‘ì„± (Green)
- [ ] ì½”ë“œ ê°œì„  ë° ë¦¬íŒ©í† ë§ (Refactor)
- [ ] ê° ë‹¨ê³„ì—ì„œ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
- [ ] ì‘ì€ ë‹¨ìœ„ë¡œ ë‹¨ê³„ì  ì§„í–‰
- [ ] ëª¨í‚¹ ì „ëµ ê²°ì •

## 10. ì°¸ê³  ìë£Œ

### 10.1 ê´€ë ¨ ë¬¸ì„œ
- [Caret ì•„í‚¤í…ì²˜ ë° êµ¬í˜„ ê°€ì´ë“œ](./caret-architecture-and-implementation-guide.mdx)
- [í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ìƒí˜¸ì‘ìš© íŒ¨í„´](./frontend-backend-interaction-patterns.mdx)
- [ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜ ì›ì¹™](./component-architecture-principles.mdx)
- [ë¡œê¹… ì‹œìŠ¤í…œ ê°€ì´ë“œ](./logging.mdx)
- [AI ì‘ì—… ë°©ë²•ë¡  ê°€ì´ë“œ](../guides/ai-work-method-guide.mdx)

### 10.2 ë„êµ¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
- [Vitest ê³µì‹ ë¬¸ì„œ](https://vitest.dev/)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
- [Jest ê³µì‹ ë¬¸ì„œ](https://jestjs.io/) (ì°¸ê³ ìš©)
- [Testing Best Practices](https://github.com/goldbergyoni/javascript-testing-best-practices)
- [VSCode Extension Testing](https://code.visualstudio.com/api/working-with-extensions/testing-extension)

### 10.3 í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ë³„ ì°¨ì´ì 

**Vitest vs Jest ì£¼ìš” ì°¨ì´ì :**
```typescript
// Vitest (í˜„ì¬ ì‚¬ìš©)
import { describe, it, expect, vi, beforeEach } from 'vitest';

// Jest (ì°¸ê³ ìš©)
import { describe, it, expect, jest, beforeEach } from '@jest/globals';
```

**ëª¨í‚¹ ë¬¸ë²• ì°¨ì´:**
```typescript
// Vitest
vi.mock('./module')
vi.spyOn(obj, 'method')

// Jest
jest.mock('./module')
jest.spyOn(obj, 'method')
```

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025ë…„ 1ì›” 27ì¼ - í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ í†µí•© ì™„ë£Œ (test-writing-standards.mdx, tdd-guide.mdx ë‚´ìš© í†µí•©)
**ì‘ì„±**: Alpha (AI ì–´ì‹œìŠ¤í„´íŠ¸) 
**ê²€í† **: Luke (ê°œë°œì)
**ì´ì „ ì—…ë°ì´íŠ¸**: 2025ë…„ 1ì›” 21ì¼ - ì••ì¶• ë° êµ¬ì¡° ê°œì„  (1860ì¤„ â†’ 799ì¤„)

**ğŸ”§ ëª¨í‚¹ ì‘ì„± ì‹œ:**
- [ ] ëª¨í‚¹ ë°©ì‹ í†µì¼ (`vi.mock` ë˜ëŠ” `vi.mocked` ì¤‘ í•˜ë‚˜)
- [ ] Node.js ë‚´ì¥ ëª¨ë“ˆ í˜¼í•© ëª¨í‚¹ ë°©ì‹ ê¸ˆì§€
- [ ] VSCode API í•„ìˆ˜ ë©”ì„œë“œ ëª¨í‚¹ í™•ì¸
- [ ] Promise ëª¨í‚¹ ì‹œ `Promise.resolve()` ì‚¬ìš©

**âœ… í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ:**
- [ ] ê°œë³„ í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‹¤í–‰
- [ ] í…ŒìŠ¤íŠ¸ ê²©ë¦¬ í™•ì¸
- [ ] ëª¨í‚¹ í˜¸ì¶œ í™•ì¸
- [ ] ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ í¬í•¨

### 9.3 ë¹ ë¥¸ ì°¸ì¡° í…œí”Œë¦¿ âš¡

**ê¸°ë³¸ ëª¨í‚¹ ì„¤ì •:**
```typescript
vi.mock("vscode", () => standardVSCodeMock)
vi.mock("fs", () => standardFsMock)
beforeEach(() => vi.clearAllMocks())
```

**AI íš¨ìœ¨ì„± íŒ:**
- ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒ¨í„´ ì¬ì‚¬ìš©
- í‘œì¤€ ëª¨í‚¹ í…œí”Œë¦¿ í™œìš©
- í…ŒìŠ¤íŠ¸ ë°ì´í„° ìµœì†Œí™”
- ì¦‰ì‹œ ê²€ì¦ ì‹¤í–‰

## 10. ì°¸ê³  ìë£Œ

### 10.1 ê´€ë ¨ ë¬¸ì„œ

-   [í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± í‘œì¤€](./testing-guide.mdx) (í†µí•©ë¨)
-   [ë¬¸ì„œí™” ê°€ì´ë“œ](./documentation-guide.mdx)
-   [AI ì‘ì—… ë°©ë²•ë¡  ê°€ì´ë“œ](../guides/ai-work-method-guide.mdx)

### 10.2 ë„êµ¬ ë¬¸ì„œ

-   [Jest ê³µì‹ ë¬¸ì„œ](https://jestjs.io/)
-   [Vitest ê³µì‹ ë¬¸ì„œ](https://vitest.dev/)
-   [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025ë…„ 1ì›” 21ì¼ - AI ê°œë°œì ê°€ì´ë“œ ì¶”ê°€ ë° ë””ë²„ê¹… ì „ëµ ê°•í™”
**ì‘ì„±**: Alpha (AI ì–´ì‹œìŠ¤í„´íŠ¸)
**ê²€í† **: Luke (ê°œë°œì)
