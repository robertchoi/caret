<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>간단한 계산기</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="calculator">
        <div class="calculator-display">0</div>
        <div class="calculator-keys">
            <button class="key-operator" data-action="add">+</button>
            <button class="key-operator" data-action="subtract">-</button>
            <button class="key-operator" data-action="multiply">*</button>
            <button class="key-operator" data-action="divide">/</button>
            <button>7</button>
            <button>8</button>
            <button>9</button>
            <button>4</button>
            <button>5</button>
            <button>6</button>
            <button>1</button>
            <button>2</button>
            <button>3</button>
            <button>0</button>
            <button class="key-decimal" data-action="decimal">.</button>
            <button class="key-clear" data-action="clear">C</button>
            <button class="key-equal" data-action="calculate">=</button>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        // script.js의 함수들을 웹 환경에 맞게 연결합니다.
        const display = document.querySelector('.calculator-display');
        const keys = document.querySelector('.calculator-keys');

        let calculatorState = {
            displayValue: '0',
            firstOperand: null,
            waitingForSecondOperand: false,
            operator: null,
        };

        function updateDisplay() {
            display.textContent = calculatorState.displayValue;
        }

        keys.addEventListener('click', (event) => {
            const { target } = event;
            if (!target.matches('button')) {
                return;
            }

            if (target.classList.contains('key-operator')) {
                handleOperator(target.dataset.action, calculatorState);
                updateDisplay();
                return;
            }

            if (target.classList.contains('key-decimal')) {
                handleNumber(target.textContent, calculatorState);
                updateDisplay();
                return;
            }

            if (target.classList.contains('key-clear')) {
                handleClear(calculatorState);
                updateDisplay();
                return;
            }

            if (target.classList.contains('key-equal')) {
                handleEquals(calculatorState);
                updateDisplay();
                return;
            }

            // 숫자 버튼
            handleNumber(target.textContent, calculatorState);
            updateDisplay();
        });

        updateDisplay(); // 초기 디스플레이 설정
    </script>
</body>
</html>
