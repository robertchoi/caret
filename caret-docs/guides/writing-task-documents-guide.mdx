# 작업 문서 작성 가이드 (AI 대화 세션 기반)

## 1. 개요

이 문서는 Caret 프로젝트에서 **AI와의 협업**을 위한 작업 문서 작성 방법을 안내합니다. 모든 작업은 **한 번의 AI 대화 세션에서 완료 가능한 크기**로 설계되어야 하며, Plan과 Checklist를 통합한 단일 문서 형태를 사용합니다.

**핵심 원칙**:

-   🎯 **한 대화 완료**: 모든 작업은 AI와의 한 번의 대화로 완료 가능해야 함
-   📏 **적정 크기**: 컨텍스트 윈도우 50% 이내, 1-3개 파일 수정, 2-4시간 작업
-   🔄 **독립성**: 각 작업은 다른 작업에 의존하지 않고 독립적으로 완료 가능해야 함

## 2. 작업 크기 기준 (AI 대화 세션 기반)

### 2.1. 작업 분리 필수 기준 🔴

다음 중 하나라도 해당하면 **반드시 작업을 분리**해야 합니다:

**기술적 기준:**

-   컨텍스트 윈도우 70% 이상 사용 예상
-   6개 이상 파일 수정 필요
-   시스템 전반에 영향을 미치는 변경
-   E2E 테스트 + 다중 환경 검증 필요

**시간적 기준:**

-   예상 작업 시간 6시간 이상
-   Phase 9개 이상 필요
-   여러 날에 걸친 작업 필요

**복잡도 기준:**

-   4개 이상 컴포넌트 연관
-   다중 API 변경 필요
-   아키텍처 레벨 변경

### 2.2. 적정 작업 크기 🟢

**이상적인 작업 크기:**

-   컨텍스트 윈도우: 30-50% 사용
-   파일 수정: 1-3개
-   작업 시간: 2-4시간 (한 대화 세션)
-   Phase 개수: 3-5개
-   복잡도: 단일 기능/버그픽스

## 3. 통합 작업 문서 구조

### 3.1. 파일 명명 규칙

**마스터 작업:**

```
{task-number}-{task-name}.md
```

예: `002-language-settings-restoration.md`

**서브 작업:**

```
{task-number}-{sub-number}-{sub-task-name}.md
```

예: `002-1-storage-consistency-fix.md`, `002-2-ui-reactivity-improvement.md`

### 3.2. 문서 구조 템플릿

```markdown
# Task #{task-number}: {작업명}

**작업 기간**: {예상 기간} (1일 이하)  
**담당자**: {담당자명}  
**우선순위**: {High/Medium/Low}  
**예상 시간**: {2-4시간}

## 🎯 작업 개요

### 목표

-   {핵심 목표 1-2줄로 명확히}

### 배경

-   {왜 이 작업이 필요한지 간략히}

### 범위

-   ✅ **포함**: {이 작업에서 다룰 내용}
-   ❌ **제외**: {이 작업에서 다루지 않을 내용}

### 주요 산출물

-   {결과물 목록}

## 📚 작업 전 숙지사항 (AI 필수)

-   `{문서경로1}`: {해당 문서에서 얻어야 할 정보}
-   `{문서경로2}`: {해당 문서에서 얻어야 할 정보}

## ✅ 실행 체크리스트

### Phase 1: {단계명}

-   [ ] **1.1**: {구체적 실행 항목}
-   [ ] **1.2**: {구체적 실행 항목}

### Phase 2: {단계명}

-   [ ] **2.1**: {구체적 실행 항목}
-   [ ] **2.2**: {구체적 실행 항목}

### Phase 3: {단계명}

-   [ ] **3.1**: {구체적 실행 항목}
-   [ ] **3.2**: {구체적 실행 항목}

## 🔧 기술적 제약사항

-   {Cline 원본 파일 수정 시 백업 필수}
-   {특정 라이브러리/패턴 사용 제한}
-   {테스트 커버리지 요구사항}

## 📝 진행 노트 (실시간 업데이트)

-   {이슈, 결정사항, 중요 발견사항 기록}

## ✅ 완료 기준

-   [ ] 모든 체크리스트 항목 완료
-   [ ] 테스트 통과 확인
-   [ ] 코드 리뷰 완료 (필요시)
-   [ ] 문서 업데이트 완료
```

## 4. 작업 분리 전략

### 4.1. 마스터-서브 구조 (순차적 분리)

복잡한 작업을 단계별로 나누어 순차 진행:

```
Task #002: 언어 설정 시스템 복원 (마스터)
├── Task #002-1: 저장소 불일치 해결 (1일)
├── Task #002-2: UI 반응성 개선 (1일)
└── Task #002-3: 통합 테스트 구축 (1일)
```

**특징:**

-   마스터 작업이 전체 맥락과 목표 제시
-   서브 작업들은 순차적 의존성 가짐
-   진행 상황 추적 용이

### 4.2. 독립적 분리 (기능별 분리)

서로 독립적인 기능들을 별도 작업으로 분리:

```
Task #010: 새로운 기능 A 구현 (1일)
Task #011: 새로운 기능 B 구현 (1일)
Task #012: 새로운 기능 C 구현 (1일)
```

**특징:**

-   각 작업이 완전히 독립적
-   병렬 진행 가능
-   우선순위 조정 용이

## 5. AI 작업 시작 프로토콜

AI가 작업을 시작할 때 반드시 확인해야 할 사항:

1. **작업 크기 검증**: 한 대화에서 완료 가능한가?
2. **의존성 확인**: 다른 작업 완료를 기다려야 하는가?
3. **문서 숙지**: 필수 참조 문서를 모두 읽었는가?
4. **환경 준비**: 개발 환경이 준비되었는가?
5. **완료 기준**: 무엇을 달성해야 완료인가?

## 6. 작업 문서 관리

### 6.1. 상태 관리

-   `caret-docs/tasks/task-status.md`에서 전체 작업 상태 관리
-   **협업을 위한 안정적인 정보 제공**: 실시간 변경이 아닌 주요 마일스톤 완료 시에만 업데이트
-   **업데이트 책임**: 작업 담당자가 주요 Phase 완료 시 상태 업데이트
-   작업 완료 시 `completed/` 폴더로 이동

### 6.2. task-status.md 협업 가이드

**목적**: 팀원들이 언제든 프로젝트 전체 상황을 파악할 수 있는 신뢰할 수 있는 정보원

**업데이트 원칙**:

-   ✅ **업데이트 시점**: 주요 마일스톤 (Phase 완료, Task 완료) 시에만
-   ❌ **실시간 변경 금지**: 작업 중 세부 진행사항은 업데이트하지 않음
-   📊 **안정적인 정보**: 완료된 성과와 확정된 계획만 포함

**구조 요소**:

-   **프로젝트 현황 요약**: 전체 진행률과 현재 활성 작업
-   **완료된 작업**: 검증된 완료 작업들의 성과
-   **진행 중인 작업**: 현재 활성화된 작업의 상태
-   **계획된 작업**: 확정된 다음 작업들
-   **마일스톤**: 주요 성과와 일정
-   **협업 안내**: 새로운 팀원을 위한 가이드

### 6.3. 작업 로그 연동

-   일일 작업 로그: `caret-docs/work-logs/{username}/{date}.md`
-   작업 시작/완료 시 작업 로그 업데이트

## 7. 품질 관리

### 7.1. 작업 전 체크리스트

-   [ ] 작업 크기가 적정한가?
-   [ ] 완료 기준이 명확한가?
-   [ ] 필수 참조 문서가 명시되었는가?
-   [ ] 기술적 제약사항이 고려되었는가?

### 7.2. 작업 완료 체크리스트

-   [ ] 모든 Phase 완료
-   [ ] 테스트 통과
-   [ ] 문서 업데이트
-   [ ] 작업 로그 기록
-   [ ] 다음 작업과의 연결점 확인

이 가이드를 따르면 AI와의 효율적인 협업이 가능하며, 각 작업이 독립적으로 완료되어 프로젝트 진행이 원활해집니다.
