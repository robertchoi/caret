# JSON 데이터 처리 시스템 요구사항 명세서

## 1. 개요
본 문서는 JSON 데이터를 처리하기 위한 시스템의 요구사항을 정의합니다. 이 시스템은 다양한 JSON 데이터에 대한 변환, 필터링, 집계, 정렬 및 정제 기능을 제공하며, 파일 입출력을 지원합니다.

## 2. 기능 요구사항

### 2.1. 데이터 변환
- **중첩 JSON 평면화**: 중첩된 JSON 객체를 `.` (점) 표기법을 사용하여 평면화된 키-값 쌍으로 변환합니다.
  - 예시: `{ "user": { "profile": { "name": "John", "age": 30 } }, "address": { "city": "Seoul" } }`
  - 변환 후: `{ "user.profile.name": "John", "user.profile.age": 30, "address.city": "Seoul" }`
- **배열 데이터 그룹화**: 지정된 키(필드)를 기준으로 배열 데이터를 그룹화합니다.
  - 예시: 사용자 목록을 `department` 또는 `region` 필드를 기준으로 그룹핑
  - 테스트 케이스:
    - 단일 필드 그룹화
    - 다중 필드 그룹화
    - 존재하지 않는 필드로 그룹화 시 예외 처리

### 2.2. 필터링 및 검색
- **복잡한 조건 필터링**: AND/OR 논리 연산자를 지원하는 복잡한 조건을 사용하여 데이터를 필터링합니다.
- **정규식 지원**: 필터링 조건에 정규식 패턴을 사용하여 문자열 필드를 검색할 수 있습니다.
  - 테스트 케이스:
    - 단일 조건 필터링 (같음, 다름, 크다, 작다 등)
    - AND 조건 필터링
    - OR 조건 필터링
    - AND/OR 혼합 조건 필터링
    - 정규식을 사용한 문자열 필터링
    - 숫자 범위 필터링

### 2.3. 집계 및 통계
- **숫자형 데이터 집계**: 지정된 숫자형 필드에 대해 다음 집계 함수를 지원합니다.
  - 합계 (Sum)
  - 평균 (Average)
  - 최대값 (Max)
  - 최소값 (Min)
- **빈도 분석**: 특정 필드의 값에 대한 빈도수를 계산합니다.
  - 테스트 케이스:
    - 유효한 숫자형 필드에 대한 합계, 평균, 최대/최소 계산
    - 유효하지 않은 필드 또는 비숫자형 필드에 대한 집계 시 예외 처리
    - 특정 필드의 값 빈도 분석

### 2.4. 정렬 및 정제
- **다중 필드 정렬**: 하나 이상의 필드를 기준으로 데이터를 오름차순 또는 내림차순으로 정렬합니다.
  - 테스트 케이스:
    - 단일 필드 오름차순 정렬
    - 단일 필드 내림차순 정렬
    - 다중 필드 정렬 (각 필드별 정렬 순서 지정 가능)
- **중복 제거**: 지정된 필드를 기준으로 중복된 데이터를 제거합니다.
  - 테스트 케이스:
    - 단일 필드 중복 제거
    - 다중 필드 중복 제거
- **데이터 유효성 검증**: 정의된 스키마 또는 규칙에 따라 데이터의 유효성을 검증합니다. (초기 버전에서는 간단한 타입 검증 또는 필수 필드 존재 여부 검증)
  - 테스트 케이스:
    - 필수 필드 누락 시 유효성 검증 실패
    - 잘못된 데이터 타입 시 유효성 검증 실패

### 2.5. 파일 입출력
- **JSON 형식 지원**: JSON 파일을 읽고 쓸 수 있습니다.
- **CSV 형식 지원**: CSV 파일을 읽고 쓸 수 있습니다. (CSV는 평면화된 JSON 구조에 적합)
  - 테스트 케이스:
    - 유효한 JSON 파일 읽기 및 쓰기
    - 유효한 CSV 파일 읽기 및 쓰기
    - 존재하지 않는 파일 또는 잘못된 형식의 파일 처리

## 3. 성능 요구사항
- 대용량 JSON 데이터 (예: 100MB 이상) 처리 시에도 합리적인 시간 내에 작업을 완료해야 합니다.
- 특히 필터링 및 집계 작업에서 최적화된 성능을 보여야 합니다.
- 메모리 사용량은 효율적으로 관리되어야 합니다.

## 4. 기술 스택
- Node.js
- Jest (테스트 프레임워크)
- 표준 라이브러리 위주 (외부 의존성 최소화)

## 5. 프로젝트 구조 (예상)
```
json-processor/
└── {AI에이전트명}/
    ├── json-processor-spec.md
    ├── processor.js          # 핵심 데이터 처리 로직
    ├── processor.test.js     # processor.js 테스트 코드
    ├── cli.js                # CLI 인터페이스
    ├── sample.json           # 샘플 JSON 데이터
    ├── package.json          # 프로젝트 의존성 및 스크립트
    └── project-report.md     # 프로젝트 보고서
